PHP Warning:  PHP Startup: Unable to load dynamic library 'libvirt-php.so' (tried: /usr/lib/php/20240924/libvirt-php.so (/usr/lib/php/20240924/libvirt-php.so: cannot open shared object file: No such file or directory), /usr/lib/php/20240924/libvirt-php.so.so (/usr/lib/php/20240924/libvirt-php.so.so: cannot open shared object file: No such file or directory)) in Unknown on line 0
PHPUnit 10.5.58 by Sebastian Bergmann and contributors.

Runtime:       PHP 8.4.13
Configuration: /home/alexey/Документы/Projects/Cursor/HttpRouter/phpunit.xml

...............................................................  63 / 245 ( 25%)
............................................................... 126 / 245 ( 51%)
............................................................... 189 / 245 ( 77%)
........................................................        245 / 245 (100%)

Time: 00:03.785, Memory: 14.00 MB

Action Resolver (CloudCastle\Http\Router\Tests\Unit\ActionResolver)
 ✔ Resolve closure
 ✔ Resolve closure with parameters
 ✔ Resolve array with class
 ✔ Resolve array with instance
 ✔ Resolve string with at separator
 ✔ Resolve string with double colon separator
 ✔ Invalid action throws exception
 ✔ Invalid string format throws exception
 ✔ Non existent method throws exception

Auto Ban Integration (CloudCastle\Http\Router\Tests\Unit\AutoBanIntegration)
 ✔ Throttle with ban
 ✔ Ban exception details
 ✔ Ban manager statistics
 ✔ Different ban durations

Ban Manager (CloudCastle\Http\Router\Tests\Unit\BanManager)
 ✔ Ip not banned initially
 ✔ Record violation
 ✔ Auto ban after max violations
 ✔ Manual ban
 ✔ Unban
 ✔ Ban expiration
 ✔ Get banned ips
 ✔ Clear violations
 ✔ Clear all bans
 ✔ Get statistics
 ✔ Ban time remaining
 ✔ No ban time for non banned ip

Helpers (CloudCastle\Http\Router\Tests\Unit\Helpers)
 ✔ Route helper
 ✔ Route helper without name
 ✔ Current route helper
 ✔ Previous route helper
 ✔ Route is helper
 ✔ Route name helper
 ✔ Router helper
 ✔ Route url helper
 ✔ Route url with multiple parameters
 ✔ Route has helper
 ✔ Route stats helper
 ✔ Routes by tag helper
 ✔ Route back helper
 ✔ Route back with default
 ✔ Dispatch route helper
 ✔ Dispatch route helper with query string

Middleware Dispatcher (CloudCastle\Http\Router\Tests\Unit\MiddlewareDispatcher)
 ✔ Dispatch without middleware
 ✔ Dispatch with single middleware
 ✔ Middleware chain
 ✔ Middleware order
 ✔ Add middleware

Protocol Support (CloudCastle\Http\Router\Tests\Unit\ProtocolSupport)
 ✔ Protocol setting
 ✔ Https only route
 ✔ Http or https route
 ✔ Web socket protocol
 ✔ Secure web socket protocol
 ✔ Protocol validation
 ✔ Dispatch with https requirement
 ✔ Dispatch with protocol restriction
 ✔ Group with https requirement
 ✔ Group with protocol
 ✔ Secure shortcut
 ✔ Protocol inheritance in nested groups
 ✔ No protocol restriction

Rate Limiter (CloudCastle\Http\Router\Tests\Unit\RateLimiter)
 ✔ Basic rate limiting
 ✔ Remaining attempts
 ✔ Too many attempts
 ✔ Clear attempts
 ✔ Available in
 ✔ Multiple users
 ✔ Custom key
 ✔ Attempts count
 ✔ Reset all

Rate Limiter Time Units (CloudCastle\Http\Router\Tests\Unit\RateLimiterTimeUnits)
 ✔ Per second
 ✔ Per second multiple
 ✔ Per minute
 ✔ Per minute multiple
 ✔ Per hour
 ✔ Per day
 ✔ Per week
 ✔ Per month
 ✔ Make with time unit
 ✔ Backward compatibility get decay minutes

Route (CloudCastle\Http\Router\Tests\Unit\Route)
 ✔ Route creation
 ✔ Route with multiple methods
 ✔ Route matching
 ✔ Route parameter extraction
 ✔ Route with regex constraint
 ✔ Multiple parameters extraction
 ✔ Route naming
 ✔ Route tagging
 ✔ Route tagging with array
 ✔ Route middleware
 ✔ Route domain
 ✔ Route port
 ✔ Route whitelist ip
 ✔ Route blacklist ip
 ✔ Route without constraints
 ✔ Fluent interface

Route Cache (CloudCastle\Http\Router\Tests\Unit\RouteCache)
 ✔ Cache creation
 ✔ Cache not exists initially
 ✔ Put and get cache
 ✔ Clear cache
 ✔ Enable disable cache
 ✔ Cache freshness
 ✔ Get non existent cache
 ✔ Custom cache file

Route Collection (CloudCastle\Http\Router\Tests\Unit\RouteCollection)
 ✔ Add route
 ✔ Exact match
 ✔ Exact match not found
 ✔ Get by name
 ✔ Get by name not found
 ✔ Iterator
 ✔ Countable
 ✔ Array access
 ✔ Array access unset
 ✔ All
 ✔ Parameterized routes not indexed

Route Compiler (CloudCastle\Http\Router\Tests\Unit\RouteCompiler)
 ✔ Compile simple route
 ✔ Compile named route
 ✔ Compile tagged route
 ✔ Restore routes
 ✔ Compile closure route
 ✔ Compile array action
 ✔ Compile with middleware
 ✔ Compile metadata

Route Group (CloudCastle\Http\Router\Tests\Unit\RouteGroup)
 ✔ Group creation
 ✔ Group with middleware
 ✔ Group with domain
 ✔ Group with port
 ✔ Group with throttle
 ✔ Group with tags
 ✔ Group with ip whitelist
 ✔ Group with ip blacklist
 ✔ Fluent interface
 ✔ Apply to route

Route Macros (CloudCastle\Http\Router\Tests\Unit\RouteMacros)
 ✔ Resource macro
 ✔ Resource macro methods
 ✔ Api resource macro
 ✔ Api resource rate limits
 ✔ Crud macro
 ✔ Auth macro
 ✔ Auth macro rate limiting
 ✔ Admin panel macro
 ✔ Api version macro
 ✔ Webhooks macro
 ✔ Multiple macros combined

Route Shortcuts (CloudCastle\Http\Router\Tests\Unit\RouteShortcuts)
 ✔ Auth shortcut
 ✔ Guest shortcut
 ✔ Api shortcut
 ✔ Web shortcut
 ✔ Cors shortcut
 ✔ Localhost shortcut
 ✔ Secure shortcut
 ✔ Throttle standard shortcut
 ✔ Throttle strict shortcut
 ✔ Throttle generous shortcut
 ✔ Public shortcut
 ✔ Private shortcut
 ✔ Admin shortcut
 ✔ Api endpoint shortcut
 ✔ Protected shortcut
 ✔ Chained shortcuts

Router (CloudCastle\Http\Router\Tests\Unit\Router)
 ✔ Get route
 ✔ Post route
 ✔ Put route
 ✔ Patch route
 ✔ Delete route
 ✔ View route
 ✔ Custom route
 ✔ Match route
 ✔ Any route
 ✔ Route group
 ✔ Nested route groups
 ✔ Group with middleware
 ✔ Group with domain
 ✔ Group with port
 ✔ Dispatch successful
 ✔ Dispatch route not found
 ✔ Dispatch method not allowed
 ✔ Dispatch ip not allowed
 ✔ Dispatch with domain
 ✔ Dispatch with wrong domain
 ✔ Dispatch with port
 ✔ Dispatch with wrong port
 ✔ Named route
 ✔ Tagged routes
 ✔ Get all routes
 ✔ Global middleware
 ✔ Singleton pattern
 ✔ Reset singleton

Router Filtering (CloudCastle\Http\Router\Tests\Unit\RouterFiltering)
 ✔ Current route
 ✔ Current route named
 ✔ Previous route
 ✔ Previous route named
 ✔ Route history
 ✔ Get routes by method
 ✔ Get routes by domain
 ✔ Get routes by port
 ✔ Get routes by whitelisted ip
 ✔ Get routes by blacklisted ip
 ✔ Get routes by middleware
 ✔ Get throttled routes
 ✔ Get routes by prefix
 ✔ Get routes with ip restrictions
 ✔ Get routes with domain
 ✔ Get routes with port
 ✔ Get route stats
 ✔ Search routes
 ✔ Has route
 ✔ Has tag
 ✔ Get all tags
 ✔ Get all domains
 ✔ Get all ports
 ✔ Get routes by uri pattern
 ✔ Complex search

Router Get All Routes (CloudCastle\Http\Router\Tests\Unit\RouterGetAllRoutes)
 ✔ Get routes
 ✔ Get routes as array
 ✔ Count
 ✔ Get routes as json
 ✔ Get routes grouped by method
 ✔ Get routes grouped by prefix
 ✔ Get routes grouped by domain
 ✔ Static facade get routes
 ✔ Static facade get routes as array
 ✔ Static facade get routes as json
 ✔ Empty router

Security Middleware (CloudCastle\Http\Router\Tests\Unit\SecurityMiddleware)
 ✔ Https enforcement with https
 ✔ Https enforcement with http
 ✔ Https enforcement with forwarded proto
 ✔ Https enforcement with forwarded ssl
 ✔ Security logger creation
 ✔ Security logger logs request
 ✔ Security logger logs exception
 ✔ Ssrf protection allows normal requests
 ✔ Ssrf protection blocks localhost url
 ✔ Ssrf protection blocks private ip
 ✔ Ssrf protection blocks metadata endpoint
 ✔ Ssrf protection with whitelist
 ✔ Ssrf protection rejects non whitelisted domain
 ✔ Ssrf protection blocks file protocol
 ✔ Ssrf protection allows subdomains

Time Unit (CloudCastle\Http\Router\Tests\Unit\TimeUnit)
 ✔ Second value
 ✔ Minute value
 ✔ Hour value
 ✔ Day value
 ✔ Week value
 ✔ Month value
 ✔ Get name
 ✔ Get plural

There was 1 PHPUnit test runner warning:

1) XDEBUG_MODE=coverage (environment variable) or xdebug.mode=coverage (PHP configuration setting) has to be set

OK, but there were issues!
Tests: 245, Assertions: 585, PHPUnit Warnings: 1, PHPUnit Deprecations: 1.
