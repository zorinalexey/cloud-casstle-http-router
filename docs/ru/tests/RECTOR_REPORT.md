# Rector - –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞

[English](../../en/tests/RECTOR_REPORT.md) | **–†—É—Å—Å–∫–∏–π** | [Deutsch](../../de/tests/RECTOR_REPORT.md) | [Fran√ßais](../../fr/tests/RECTOR_REPORT.md) | [‰∏≠Êñá](../../zh/tests/RECTOR_REPORT.md)

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
- [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-–∞–Ω–∞–ª–∏–∑–∞)
- [–ü—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞](#–ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ-–ø—Ä–∞–≤–∏–ª–∞)
- [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-—Å-–∞–Ω–∞–ª–æ–≥–∞–º–∏)
- [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

## –í–≤–µ–¥–µ–Ω–∏–µ

Rector - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ PHP –∫–æ–¥–∞. –û–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –¥–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ PHP, –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ PHP.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Rector

- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π PHP
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- –£–¥–∞–ª–µ–Ω–∏–µ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
- –£–ª—É—á—à–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `rector.php`

```php
return RectorConfig::configure()
    ->withPaths([__DIR__ . '/src', __DIR__ . '/tests'])
    ->withPhpSets(php81: true)
    ->withSets([
        LevelSetList::UP_TO_PHP_81,
        SetList::CODE_QUALITY,
        SetList::CODING_STYLE,
        SetList::DEAD_CODE,
        SetList::TYPE_DECLARATION,
        SetList::EARLY_RETURN,
        SetList::INSTANCEOF,
    ]);
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **PHP Sets:** PHP 8.1
- **–í–∫–ª—é—á–µ–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã:** 7 sets
- **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:** src, tests
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è:** vendor, build, coverage, RealWorldScenariosTest.php

### –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```bash
> rector process --dry-run

87/87 [‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì] 100%

[OK] Rector is done!
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –û–¢–õ–ò–ß–ù–û

**–ò–∑–º–µ–Ω–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è:** 0  
**–§–∞–π–ª–æ–≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:** 87  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~5 —Å–µ–∫—É–Ω–¥  

---

## –ü—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### 1. UP_TO_PHP_81

–ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è –¥–æ PHP 8.1:
- ‚úÖ Readonly properties
- ‚úÖ Enum support
- ‚úÖ New in initializers
- ‚úÖ First-class callable syntax
- ‚úÖ Intersection types

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –∫–æ–¥–∞:**
```php
// ‚úÖ PHP 8.1 features –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
enum TimeUnit: int
{
    case SECOND = 1;
    case MINUTE = 60;
    // ...
}

// ‚úÖ Readonly –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
public function __construct(
    private readonly Router $router,
    private readonly string $baseUrl = ''
) {}
```

### 2. CODE_QUALITY

–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞:
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ü–∏–∫–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
// ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫–æ–¥
return $this->namedRoutes[$name] ?? null;

// –í–º–µ—Å—Ç–æ:
// if (isset($this->namedRoutes[$name])) {
//     return $this->namedRoutes[$name];
// }
// return null;
```

### 3. CODING_STYLE

–°—Ç–∏–ª—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å

### 4. DEAD_CODE

–£–¥–∞–ª–µ–Ω–∏–µ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞:
- ‚úÖ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- ‚úÖ –ù–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥
- ‚úÖ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞

### 5. TYPE_DECLARATION

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤:
- ‚úÖ void return types
- ‚úÖ Property types
- ‚úÖ Parameter types

**–ü—Ä–∏–º–µ—Ä:**
```php
// ‚úÖ –í—Å–µ —Ç–∏–ø—ã —É–∫–∞–∑–∞–Ω—ã
private array $routes = [];
private ?RouteCache $cache = null;

public function clearCache(): bool
{
    // ...
}
```

### 6. EARLY_RETURN

–†–∞–Ω–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏:

```php
// ‚úÖ Early return
public function loadFromCache(): bool
{
    if (!$this->cache instanceof RouteCache) {
        return false; // –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥
    }
    
    if ($this->cacheLoaded) {
        return false; // –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥
    }
    
    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
    $cached = $this->cache->get();
    // ...
}
```

### 7. INSTANCEOF

–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ instanceof:

```php
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
if ($action instanceof Closure) {
    return $this->resolveClosure($action, $parameters);
}
```

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Rector –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö

| –†–æ—É—Ç–µ—Ä | Rector | –ù–∞–±–æ—Ä—ã –ø—Ä–∞–≤–∏–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–π | –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å | –û—Ü–µ–Ω–∫–∞ |
|--------|--------|---------------|-----------|---------------|--------|
| **CloudCastle** | **‚úÖ** | **7 sets** | **0** | **PHP 8.1+** | **‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê** |
| Symfony | ‚úÖ | 10+ sets | 0 | PHP 8.2+ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Laravel | ‚ö†Ô∏è | 5 sets | Few | PHP 8.1+ | ‚≠ê‚≠ê‚≠ê‚≠ê |
| FastRoute | ‚ùå | - | - | PHP 5.4+ | ‚≠ê‚≠ê |
| Slim | ‚ö†Ô∏è | 3 sets | Few | PHP 7.4+ | ‚≠ê‚≠ê‚≠ê |

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤

**CloudCastle HTTP Router:**

1. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π PHP –∫–æ–¥:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç PHP 8.1+ features
   - Enum –¥–ª—è TimeUnit
   - Readonly properties
   - Typed properties –≤–µ–∑–¥–µ

2. **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ:**
   - –ù–µ—Ç –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
   - –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
   - –†–∞–Ω–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã

3. **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å:**
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   - –°–ª–µ–¥—É–µ—Ç –Ω–æ–≤—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Laravel:**
- CloudCastle: PHP 8.2+ (–Ω–æ–≤–µ–µ)
- Laravel: PHP 8.1+ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π)
- CloudCastle –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤–µ–π—à–∏–µ —Ñ–∏—á–∏

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å FastRoute:**
- CloudCastle: Modern PHP 8.2+
- FastRoute: Legacy PHP 5.4+
- –û–≥—Ä–æ–º–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ Rector:**
   ```bash
   composer rector
   ```

2. **–ê–≤—Ç–æ—Ñ–∏–∫—Å:**
   ```bash
   composer rector:fix
   ```

3. **–î–æ–±–∞–≤—å—Ç–µ –≤ CI:**
   ```yaml
   - name: Rector
     run: composer rector
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º:**
   ```bash
   composer rector
   composer rector:fix
   composer test
   ```

### –ü–ª—é—Å—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è Rector

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è** - –∫–æ–¥ –≤—Å–µ–≥–¥–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π  
‚úÖ **–ú–µ–Ω—å—à–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞** - –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ä–∞–Ω–æ  
‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥  
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–ª—è—Ç—å  
‚úÖ **–û–±—É—á–µ–Ω–∏–µ** - Rector –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏  

### –ú–∏–Ω—É—Å—ã

‚ö†Ô∏è **–ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –∫–æ–¥** - –Ω—É–∂–Ω—ã —Ç–µ—Å—Ç—ã  
‚ö†Ô∏è **–ë–æ–ª—å—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ  
‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è** - —á—Ç–æ –∏–º–µ–Ω–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è  

### –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è CloudCastle

–•–æ—Ç—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å:

1. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–±–æ—Ä—ã:**
   ```php
   SetList::NAMING,
   SetList::PRIVATIZATION,
   SetList::CARBON,
   ```

2. **PHP 8.2+ features:**
   ```php
   ->withPhpSets(php82: true)
   ```

3. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:**
   ```php
   ->withRules([
       CustomRule::class,
   ])
   ```

### Best Practices

1. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ** (—Ä–∞–∑ –≤ –º–µ—Å—è—Ü –º–∏–Ω–∏–º—É–º)
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ** –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–ö–æ–º–º–∏—Ç—å—Ç–µ** –∏–∑–º–µ–Ω–µ–Ω–∏—è Rector –æ—Ç–¥–µ–ª—å–Ω–æ
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** –ø—Ä–∏—á–∏–Ω—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**CloudCastle HTTP Router –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º:**

‚úÖ 0 –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è  
‚úÖ –ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–Ω–µ PHP 8.1+  
‚úÖ –í—Å–µ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã  
‚úÖ –ù–µ—Ç –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞  
‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å  
‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å  

**–í—ã–≤–æ–¥:** –ö–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –ø–µ—Ä–µ–¥–æ–≤–æ–º —É—Ä–æ–≤–Ω–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ PHP —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏.

---

[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#rector---–¥–µ—Ç–∞–ª—å–Ω—ã–π-–æ—Ç—á–µ—Ç-–º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏-–∫–æ–¥–∞) | [üìö –í—Å–µ —Ç–µ—Å—Ç—ã](../ALL_TESTS_DETAILED.md) | [üè† –ì–ª–∞–≤–Ω–∞—è](../../../README.md)

---

¬© 2024 CloudCastle HTTP Router. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

