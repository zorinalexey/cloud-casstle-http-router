# ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑĞ¼ CloudCastle HTTP Router

[ğŸ“š ĞĞ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ](_table-of-contents.md) | [ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ](README.md)

---
## ğŸ“š ĞĞ±Ğ·Ğ¾Ñ€

CloudCastle HTTP Router Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ **30+ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹** Ğ´Ğ»Ñ Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ñ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… PHP Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹.

### ğŸ† **Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ¸Ñ‡Ğ¸ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² CloudCastle):**
1. **Auto-Naming** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ²
2. **ThrottleWithBan** - rate limiting + Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ban
3. **IP Filtering** - whitelist/blacklist Ğ´Ğ»Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ²
4. **SSRF Protection** - Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Server-Side Request Forgery
5. **Security Logger** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
6. **JSON Configuration** - ĞµĞ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€Ğ¾ÑƒÑ‚ĞµÑ€ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ JSON
7. **Route Macros** - 7+ Ğ¼Ğ°ĞºÑ€Ğ¾ÑĞ¾Ğ² (80-97% ÑĞ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ´Ğ°)
8. **Route Shortcuts** - 13+ ÑƒĞ´Ğ¾Ğ±Ğ½Ñ‹Ñ… ÑĞ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğ¹
9. **Helper Functions** - 15+ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
10. **Tags System** - Ğ¼Ğ¾Ñ‰Ğ½Ğ°Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
11. **Analytics Plugin** - Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°

## ğŸ¯ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

### 1. RESTful Routing

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ²ÑĞµÑ… HTTP Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ².

**ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹:**
- GET, POST, PUT, DELETE, PATCH
- OPTIONS, HEAD
- CUSTOM methods (VIEW, TRACE, etc.)

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
$router->get('/users', 'UserController@index');
$router->post('/users', 'UserController@store');
$router->put('/users/{id}', 'UserController@update');
$router->delete('/users/{id}', 'UserController@destroy');
$router->patch('/users/{id}', 'UserController@patch');
$router->options('/users', 'UserController@options');

// ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹
$router->match(['GET', 'POST'], '/form', 'FormController@handle');

// Ğ’ÑĞµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹
$router->any('/debug', 'DebugController@handle');
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ | CloudCastle | FastRoute | Symfony | Laravel | Slim | Alto |
|:---|:---:|:---:|:---:|:---:|:---:|:---:|
| Standard HTTP | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| Custom methods | âœ… | âš ï¸ | âœ… | âš ï¸ | âš ï¸ | âŒ |
| Method groups | âœ… | âŒ | âœ… | âœ… | âœ… | âŒ |

---

### 2. Named Routes

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸÑ€Ğ¸ÑĞ²Ğ¾ĞµĞ½Ğ¸Ğµ Ğ¸Ğ¼Ñ‘Ğ½ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°Ğ¼ Ğ´Ğ»Ñ ÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ URL.

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```php
// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ
$router->get('/users/{id}', 'UserController@show')
    ->name('users.show');

$router->get('/posts/{year}/{month}/{slug}', 'PostController@show')
    ->name('posts.show');

// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
$route = $router->getRoute('users.show');
```

**Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ URL:**
```php
use CloudCastle\Http\Router\UrlGenerator;

$generator = new UrlGenerator($router);
$generator->setBaseUrl('https://example.com');

$url = $generator->generate('users.show', ['id' => 123]);
// https://example.com/users/123

$url = $generator->generate('posts.show', [
    'year' => 2025,
    'month' => 10,
    'slug' => 'my-post'
]);
// https://example.com/posts/2025/10/my-post
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ URL
- âœ… Ğ ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ±ĞµĞ· Ğ¿Ğ¾Ğ»Ğ¾Ğ¼ĞºĞ¸ ÑÑÑ‹Ğ»Ğ¾Ğº
- âœ… Type-safe URL generation
- âœ… ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° query parameters

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Feature | CloudCastle | FastRoute | Symfony | Laravel | Slim | Alto |
|:---|:---:|:---:|:---:|:---:|:---:|:---:|
| Named routes | âœ… | âŒ | âœ… | âœ… | âœ… | âœ… |
| URL generation | âœ… | âŒ | âœ… | âœ… | âœ… | âœ… |
| Query params | âœ… | âŒ | âœ… | âœ… | âœ… | âš ï¸ |

---

### 3. Route Groups

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ñ Ğ¾Ğ±Ñ‰Ğ¸Ğ¼Ğ¸ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ°Ğ¼Ğ¸.

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ³Ñ€ÑƒĞ¿Ğ¿:**
- ĞŸÑ€ĞµÑ„Ğ¸ĞºÑÑ‹ URI
- Middleware
- Namespace
- Domain
- Tags

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
// ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ñ Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ¾Ğ¼
$router->group(['prefix' => '/api/v1'], function($router) {
    $router->get('/users', 'UserController@index');
    $router->get('/posts', 'PostController@index');
});
// Ğ¡Ğ¾Ğ·Ğ´Ğ°ÑÑ‚: /api/v1/users, /api/v1/posts

// Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° Ñ middleware
$router->group(['middleware' => 'auth'], function($router) {
    $router->get('/profile', 'ProfileController@show');
    $router->get('/settings', 'SettingsController@index');
});

// Ğ’Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
$router->group(['prefix' => '/admin'], function($router) {
    $router->group(['middleware' => 'admin'], function($router) {
        $router->get('/users', 'Admin\UserController@index');
    });
});

// Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° Ñ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ¼
$router->group(['domain' => 'api.example.com'], function($router) {
    $router->get('/data', 'ApiController@data');
});

// Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° Ñ namespace
$router->group(['namespace' => 'App\\Admin'], function($router) {
    $router->get('/dashboard', 'DashboardController@index');
    // Resolves to: App\Admin\DashboardController
});

// ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°
$router->group([
    'prefix' => '/api/v1',
    'middleware' => ['cors', 'auth'],
    'domain' => 'api.example.com',
    'namespace' => 'App\\Api\\V1',
    'tag' => 'api-v1'
], function($router) {
    $router->get('/users', 'UserController@index');
});
```

**ĞĞ°ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¾Ğ²:**
```php
$router->group(['prefix' => '/api', 'middleware' => 'cors'], function($router) {
    // Prefix: /api, Middleware: cors
    
    $router->group(['prefix' => '/v1', 'middleware' => 'auth'], function($router) {
        // Prefix: /api/v1, Middleware: cors, auth
        
        $router->get('/users', 'UserController@index');
        // URI: /api/v1/users
        // Middleware: [cors, auth]
    });
});
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Feature | CloudCastle | FastRoute | Symfony | Laravel | Slim | Alto |
|:---|:---:|:---:|:---:|:---:|:---:|:---:|
| Groups | âœ… | âŒ | âœ… | âœ… | âœ… | âŒ |
| Prefixes | âœ… | âŒ | âœ… | âœ… | âœ… | âŒ |
| Middleware groups | âœ… | âŒ | âš ï¸ | âœ… | âœ… | âŒ |
| Nested groups | âœ… 50 | âŒ | âœ… 30 | âœ… 25 | âœ… 20 | âŒ |
| Domain groups | âœ… | âŒ | âœ… | âœ… | âŒ | âŒ |

---

### 4. Middleware System

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞœĞ¾Ñ‰Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° middleware Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ².

**Ğ¢Ğ¸Ğ¿Ñ‹ middleware:**
1. Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹
2. Ğ“Ñ€ÑƒĞ¿Ğ¿Ñ‹
3. ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
// Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ middleware (Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ ĞºĞ¾ Ğ²ÑĞµĞ¼ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°Ğ¼)
$router->middleware(['cors', 'log']);

// Middleware Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
$router->group(['middleware' => 'auth'], function($router) {
    $router->get('/profile', 'ProfileController@show');
});

// Middleware Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°
$router->get('/admin', 'AdminController@index')
    ->middleware(['auth', 'admin']);

// Custom middleware
class CustomMiddleware implements MiddlewareInterface
{
    public function handle(mixed $request, callable $next, array $parameters = []): mixed
    {
        // Before logic
        $response = $next($request);
        // After logic
        return $response;
    }
}

$router->middleware(new CustomMiddleware());
```

**Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğµ middleware:**
1. **CorsMiddleware** - CORS headers
2. **AuthMiddleware** - Authentication & authorization
3. **HttpsEnforcement** - Force HTTPS
4. **SsrfProtection** - SSRF Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°
5. **SecurityLogger** - Security logging

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Feature | CloudCastle | FastRoute | Symfony | Laravel | Slim | Alto |
|:---|:---:|:---:|:---:|:---:|:---:|:---:|
| Middleware support | âœ… | âŒ | âš ï¸ | âœ… | âœ… | âŒ |
| Global middleware | âœ… | âŒ | âš ï¸ | âœ… | âœ… | âŒ |
| Route middleware | âœ… | âŒ | âŒ | âœ… | âœ… | âŒ |
| PSR-15 | âœ… | âŒ | âŒ | âŒ | âœ… | âŒ |
| CORS | âœ… 5 | âŒ | âŒ | âœ… 3 | âš ï¸ 1 | âŒ |

---

### 5. PSR-15 Support

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ñ PSR-15 HTTP Server Request Handlers.

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ PSR-15 middleware Ğ² Ñ€Ğ¾ÑƒÑ‚ĞµÑ€Ğµ
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ middleware Ñ€Ğ¾ÑƒÑ‚ĞµÑ€Ğ° ĞºĞ°Ğº PSR-15
- Bridge Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼Ğ¸

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
use CloudCastle\Http\Router\Psr15\Psr15MiddlewareAdapter;
use CloudCastle\Http\Router\Psr15\RouterMiddlewareBridge;
use Psr\Http\Server\MiddlewareInterface as PsrMiddleware;

// PSR-15 middleware Ğ² Ñ€Ğ¾ÑƒÑ‚ĞµÑ€Ğµ
$psrMiddleware = new SomePsr15Middleware();
$adapter = new Psr15MiddlewareAdapter(
    $psrMiddleware,
    $request, // ServerRequestInterface
    $response // ResponseInterface
);

$router->middleware($adapter);

// ĞĞ°Ñˆ middleware ĞºĞ°Ğº PSR-15
$ourMiddleware = new AuthMiddleware();
$bridge = new RouterMiddlewareBridge($ourMiddleware);

// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ² PSR-15 ÑÑ‚ĞµĞºĞµ
$middleware->process($request, $handler);
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… Interoperability Ñ PSR-15 ÑĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¾Ğ¹
- âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… PSR-15 middleware
- âœ… Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | PSR-15 | Adapter | Bridge |
|:---|:---:|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ…** | **âœ…** |
| FastRoute | âŒ | âŒ | âŒ |
| Symfony | âŒ | âš ï¸ | âŒ |
| Laravel | âŒ | âŒ | âŒ |
| Slim | âœ… | âœ… | âš ï¸ |
| AltoRouter | âŒ | âŒ | âŒ |

---

### 6. Rate Limiting

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ¾Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ².

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Per minute, hour, day
- Custom time periods
- Custom keys
- Auto-reset

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
// Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ñ‹
$router->get('/api/data', 'ApiController@data')
    ->perMinute(60); // 60 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ² Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ

$router->get('/api/heavy', 'ApiController@heavy')
    ->perHour(100); // 100 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ² Ñ‡Ğ°Ñ

$router->get('/api/daily', 'ApiController@daily')
    ->perDay(1000); // 1000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ² Ğ´ĞµĞ½ÑŒ

// ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´
$router->get('/api/custom', 'ApiController@custom')
    ->throttle(100, 3600); // 100 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ·Ğ° 3600 ÑĞµĞºÑƒĞ½Ğ´

// Ğ¡ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¼ ĞºĞ»ÑÑ‡Ğ¾Ğ¼
$router->get('/api/user', 'ApiController@user')
    ->throttle(60, 60, 'user:{user_id}');
```

**Time Units:**
```php
use CloudCastle\Http\Router\TimeUnit;

// Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ ĞµĞ´Ğ¸Ğ½Ğ¸Ñ†Ñ‹
TimeUnit::SECOND; // 1 ÑĞµĞºÑƒĞ½Ğ´Ğ°
TimeUnit::MINUTE; // 60 ÑĞµĞºÑƒĞ½Ğ´
TimeUnit::HOUR;   // 3600 ÑĞµĞºÑƒĞ½Ğ´
TimeUnit::DAY;    // 86400 ÑĞµĞºÑƒĞ½Ğ´
TimeUnit::WEEK;   // 604800 ÑĞµĞºÑƒĞ½Ğ´
```

**ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ñ:**
```php
try {
    $router->dispatch('/api/data', 'GET');
} catch (TooManyRequestsException $e) {
    header('HTTP/1.1 429 Too Many Requests');
    header('Retry-After: ' . $e->getRetryAfter());
    echo json_encode([
        'error' => 'Rate limit exceeded',
        'retry_after' => $e->getRetryAfter()
    ]);
}
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | Built-in | Time Units | Custom Keys | Auto-reset |
|:---|:---:|:---:|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ… 5** | **âœ…** | **âœ…** |
| FastRoute | âŒ | - | - | - |
| Symfony | âŒ | - | - | - |
| Laravel | âœ… | âœ… 3 | âš ï¸ | âœ… |
| Slim | âŒ | - | - | - |
| AltoRouter | âŒ | - | - | - |

---

### 7. Auto-ban System

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° IP Ğ¿Ñ€Ğ¸ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ².

**Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ° CloudCastle!**

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ban Ğ¿Ñ€Ğ¸ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸ rate limit
- ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ğ°Ñ Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ±Ğ°Ğ½Ğ°
- Manual ban/unban
- Ban reasons
- Temporary & permanent bans

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
use CloudCastle\Http\Router\BanManager;

// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ban manager
$banManager = new BanManager();
$router->setBanManager($banManager);

// Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ auto-ban
$router->enableAutoBan(
    maxAttempts: 100,      // Ğ¿Ğ¾ÑĞ»Ğµ 100 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº
    decayMinutes: 60,      // Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ 1 Ñ‡Ğ°ÑĞ°  
    banDuration: 3600      // Ğ±Ğ°Ğ½ Ğ½Ğ° 1 Ñ‡Ğ°Ñ
);

// Manual ban
$banManager->ban('1.2.3.4', 'Malicious activity', 7200);

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
if ($banManager->isBanned('1.2.3.4')) {
    throw new BannedException('Your IP is banned');
}

// Unban
$banManager->unban('1.2.3.4');

// Permanent ban
$banManager->ban('5.6.7.8', 'Spam bot', null); // null = permanent
```

**Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°Ğ¼Ğ¸:**
```php
$router->get('/api/data', 'ApiController@data')
    ->perMinute(60) // rate limit
    ->blacklistIp(['known-bad-ip']); // additional protection
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | Auto-ban | Manual ban | Reasons | Temporary |
|:---|:---:|:---:|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ…** | **âœ…** | **âœ…** |
| FastRoute | âŒ | âŒ | âŒ | âŒ |
| Symfony | âŒ | âŒ | âŒ | âŒ |
| Laravel | âŒ | âŒ | âŒ | âŒ |
| Slim | âŒ | âŒ | âŒ | âŒ |
| AltoRouter | âŒ | âŒ | âŒ | âŒ |

---

### 8. IP Filtering

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ‘ĞµĞ»Ñ‹Ğµ Ğ¸ Ñ‡ĞµÑ€Ğ½Ñ‹Ğµ ÑĞ¿Ğ¸ÑĞºĞ¸ IP Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ² Ğ´Ğ»Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ².

**Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ° CloudCastle!**

**Whitelist:**
```php
// Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¾Ñ„Ğ¸ÑĞ½Ñ‹Ñ… IP
$router->get('/admin/dashboard', 'AdminController@dashboard')
    ->whitelistIp([
        '192.168.1.0/24',  // office network
        '10.0.0.50',       // specific IP
        '203.0.113.0/24',  // VPN network
    ]);

// ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ IP
$router->get('/internal/api', 'InternalController@api')
    ->whitelistIp(['10.0.0.1', '10.0.0.2', '10.0.0.3']);
```

**Blacklist:**
```php
// Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ñ… Ğ·Ğ»Ğ¾ÑƒĞ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ½Ğ¸ĞºĞ¾Ğ²
$router->get('/public/api', 'PublicController@api')
    ->blacklistIp([
        '1.2.3.4',
        '5.6.7.8',
        '9.10.11.0/24', // Ñ†ĞµĞ»Ğ°Ñ Ğ¿Ğ¾Ğ´ÑĞµÑ‚ÑŒ
    ]);

// Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ°Ñ blacklist
$badIps = $banManager->getAllBannedIps();
$router->get('/api/data', 'ApiController@data')
    ->blacklistIp($badIps);
```

**ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```php
$router->get('/sensitive/data', 'SensitiveController@data')
    ->whitelistIp(['trusted-ip'])
    ->blacklistIp(['known-attacker'])
    ->perMinute(10); // Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°
```

**ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹:**
- ĞĞ´Ğ¸Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ğµ IP: `192.168.1.100`
- CIDR notation: `192.168.1.0/24`
- IP ranges: `192.168.1.1-192.168.1.255`

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | Whitelist | Blacklist | CIDR | Dynamic |
|:---|:---:|:---:|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ…** | **âœ…** | **âœ…** |
| FastRoute | âŒ | âŒ | âŒ | âŒ |
| Symfony | âŒ | âŒ | âŒ | âŒ |
| Laravel | âŒ | âŒ | âŒ | âŒ |
| Slim | âŒ | âŒ | âŒ | âŒ |
| AltoRouter | âŒ | âŒ | âŒ | âŒ |

---

### 9. SSRF Protection

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Server-Side Request Forgery Ğ°Ñ‚Ğ°Ğº.

**Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ° CloudCastle!**

**Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚:**

- localhost (127.0.0.1, ::1)
- Private IP ranges (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16)
- Link-local (169.254.0.0/16)
- Cloud metadata APIs (169.254.169.254, metadata.google.internal)

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```php
use CloudCastle\Http\Router\Middleware\SsrfProtection;

$router->middleware(new SsrfProtection(
    allowLocalhost: false,      // Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ localhost
    allowPrivateIps: false,     // Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ private IPs
    allowCloudMetadata: false   // Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ cloud metadata
));
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ°Ñ‚Ğ°ĞºĞ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€ÑƒÑ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚:**
```php
// Ğ—Ğ»Ğ¾ÑƒĞ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ½Ğ¸Ğº Ğ¿Ñ‹Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ AWS credentials
$router->get('/proxy/{url}', function($url) {
    // Ğ‘ĞµĞ· Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹: Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ
    // http://169.254.169.254/latest/meta-data/iam/security-credentials/
    
    // Ğ¡ SsrfProtection: InsecureConnectionException
    return file_get_contents($url);
});
```

**ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:**
- URL shorteners
- Proxy services
- Webhook handlers
- Image processors
- PDF generators

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | SSRF Protection |
|:---|:---:|
| **CloudCastle** | **âœ… Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ** |
| FastRoute | âŒ |
| Symfony | âŒ |
| Laravel | âŒ |
| Slim | âŒ |
| AltoRouter | âŒ |

---

### 10. YAML Configuration

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ¸Ğ· YAML Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ².

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… Ğ”ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
- âœ… Ğ›ĞµĞ³ĞºĞ¾ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
- âœ… Version control friendly
- âœ… ĞŸĞ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ routes.yaml:**
```yaml
# ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚
home:
  path: /
  methods: GET
  controller: HomeController::index

# Ğ¡ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸ Ğ¸ requirements
user_profile:
  path: /users/{id}
  methods: [GET, POST]
  controller: UserController::profile
  requirements:
    id: \d+
  defaults:
    id: 1

# Ğ¡ middleware Ğ¸ throttle
api_endpoint:
  path: /api/v1/{resource}
  methods: [GET, POST, PUT, DELETE]
  controller: ApiController::handle
  middleware: [cors, auth]
  throttle:
    max: 100
    decay: 60
  requirements:
    resource: \w+

# Ğ¡ domain constraint
api_public:
  path: /public/data
  methods: GET
  controller: PublicApiController@data
  domain: api.example.com
```

**Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°:**
```php
use CloudCastle\Http\Router\Loader\YamlLoader;

$loader = new YamlLoader($router);
$loader->load(__DIR__ . '/config/routes.yaml');
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | YAML Support |
|:---|:---:|
| **CloudCastle** | **âœ… Full** |
| FastRoute | âŒ |
| Symfony | âœ… Full |
| Laravel | âŒ |
| Slim | âŒ |
| AltoRouter | âŒ |

---

### 11. XML Configuration

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ¸Ğ· XML Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ².

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ routes.xml:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<routes>
    <route path="/" name="home" methods="GET" 
           controller="HomeController::index"/>
    
    <route path="/users/{id}" name="users.show" 
           methods="GET,POST" controller="UserController::show">
        <middleware>auth,admin</middleware>
        <requirements>
            <requirement param="id" pattern="\d+"/>
        </requirements>
        <defaults>
            <default param="id" value="1"/>
        </defaults>
    </route>
    
    <route path="/api/v1/{resource}" name="api.resource"
           methods="GET,POST,PUT,DELETE" 
           controller="ApiController::handle"
           domain="api.example.com">
        <middleware>cors,auth</middleware>
    </route>
</routes>
```

**Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°:**
```php
use CloudCastle\Http\Router\Loader\XmlLoader;

$loader = new XmlLoader($router);
$loader->load(__DIR__ . '/config/routes.xml');
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | XML Support |
|:---|:---:|
| **CloudCastle** | **âœ… Full** |
| FastRoute | âŒ |
| Symfony | âœ… Full |
| Laravel | âŒ |
| Slim | âŒ |
| AltoRouter | âŒ |

---

### 12. JSON Configuration

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ¸Ğ· JSON ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ².

**Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ°!** (Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² CloudCastle!)

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```php
use CloudCastle\Http\Router\Loader\JsonLoader;

$loader = new JsonLoader($router);
$loader->load(__DIR__ . '/config/routes.json');
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ JSON ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:**
```json
{
  "routes": [
    {
      "method": "GET",
      "uri": "/users/{id}",
      "action": "UserController@show",
      "name": "users.show",
      "requirements": {
        "id": "\\d+"
      },
      "middleware": ["auth"],
      "throttle": {
        "limit": 100,
        "per_minutes": 1
      }
    }
  ],
  "groups": [
    {
      "prefix": "/api",
      "middleware": ["api"],
      "domain": "api.example.com",
      "routes": [
        {
          "method": "GET",
          "uri": "/status",
          "action": "ApiController@status",
          "name": "api.status"
        }
      ]
    }
  ]
}
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚
- âœ… Ğ›ĞµĞ³ĞºĞ¾ Ğ¿Ğ°Ñ€ÑĞ¸Ñ‚ÑÑ
- âœ… ĞšĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ
- âœ… API-Ğ¾Ñ€Ğ¸ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹
- âœ… Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ½Ğ¾

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | JSON Support |
|:---|:---:|
| **CloudCastle** | **âœ… Full** |
| FastRoute | âŒ |
| Symfony | âŒ |
| Laravel | âŒ |
| Slim | âŒ |
| AltoRouter | âŒ |

---

### 13. PHP Attributes (PHP 8+)

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ PHP 8 Attributes Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ².

**Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´!**

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**
```php
use CloudCastle\Http\Router\Loader\Route;
use CloudCastle\Http\Router\Loader\AttributeLoader;

class UserController
{
    #[Route('/users', methods: 'GET', name: 'users.index')]
    public function index(): array
    {
        return ['users' => User::all()];
    }
    
    #[Route('/users/{id}', methods: 'GET', name: 'users.show')]
    public function show(int $id): array
    {
        return ['user' => User::find($id)];
    }
    
    #[Route(
        '/users',
        methods: 'POST',
        name: 'users.store',
        middleware: ['auth', 'admin']
    )]
    public function store(): array
    {
        return ['created' => true];
    }
    
    #[Route(
        '/admin/users/{id}',
        methods: ['GET', 'PUT'],
        name: 'admin.users.edit',
        middleware: ['auth', 'admin'],
        domain: 'admin.example.com',
        throttle: 30
    )]
    public function adminEdit(int $id): array
    {
        return ['admin' => true, 'id' => $id];
    }
    
    // ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ğ½Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğµ
    #[Route('/user/{id}', methods: 'GET')]
    #[Route('/profile/{id}', methods: 'GET')]
    public function showProfile(int $id): array
    {
        return ['id' => $id];
    }
}

// Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°
$loader = new AttributeLoader($router);
$loader->loadFromController(UserController::class);

// Ğ˜Ğ»Ğ¸ Ğ¸Ğ· Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸
$loader->loadFromDirectory(__DIR__ . '/Controllers', 'App\\Controllers');
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ñ€ÑĞ´Ğ¾Ğ¼ Ñ ĞºĞ¾Ğ´Ğ¾Ğ¼
- âœ… Type-safe configuration
- âœ… IDE autocomplete
- âœ… Ğ ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³-friendly

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | PHP 8 Attributes | Auto-discovery |
|:---|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ…** |
| FastRoute | âŒ | âŒ |
| Symfony | âœ… | âœ… |
| Laravel | âš ï¸ (partial) | âš ï¸ |
| Slim | âŒ | âŒ |
| AltoRouter | âŒ | âŒ |

---

### 14. URL Matching

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ£ÑĞ»Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹.

**Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ°!**

**ĞĞ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹:**
- Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ: `==`, `!=`, `>`, `<`, `>=`, `<=`
- Ğ›Ğ¾Ğ³Ğ¸ĞºĞ°: `and`, `or`
- Dot notation: `user.age`, `request.header.auth`

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
// ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ
$router->get('/admin', 'AdminController@index')
    ->condition('role == "admin"');

// Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ
$router->get('/premium', 'PremiumController@content')
    ->condition('user.subscription == "premium" and user.age >= 18');

// Ğ¡ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¾Ğ¹ OR
$router->get('/manager', 'ManagerController@panel')
    ->condition('role == "admin" or role == "manager"');

// Ğ§Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ğµ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ
$router->get('/api/v2', 'ApiV2Controller@index')
    ->condition('api_version >= 2');

// Ğ’Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
$router->get('/verified', 'VerifiedController@index')
    ->condition('user.profile.verified and user.profile.age > 18');
```

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² runtime:**
```php
use CloudCastle\Http\Router\ExpressionLanguage\ExpressionLanguage;

$expr = new ExpressionLanguage();

$context = [
    'user' => [
        'age' => 25,
        'subscription' => 'premium',
        'verified' => true
    ],
    'api_version' => 2
];

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹
if ($expr->evaluate('user.age > 18', $context)) {
    // Allow access
}
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | Expression Language | Operators | Dot Notation |
|:---|:---:|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ… 8** | **âœ…** |
| FastRoute | âŒ | - | - |
| Symfony | âœ… | âœ… 10+ | âœ… |
| Laravel | âŒ | - | - |
| Slim | âŒ | - | - |
| AltoRouter | âŒ | - | - |

---

### 15. Expression Language

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ¸ÑĞº Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ° Ğ¿Ğ¾ URL Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñƒ.

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```php
use CloudCastle\Http\Router\UrlMatcher;

$matcher = new UrlMatcher($router);

// ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚
$result = $matcher->match('/users/123', 'GET');
// [
//     'route' => Route instance,
//     'parameters' => ['id' => '123']
// ]

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
if ($matcher->matches('/users', 'GET')) {
    // Route exists
}
```

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- âœ… Ğ¢Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ URL
- âœ… Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²
- âœ… Case-insensitive Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹
- âœ… Trailing slash handling

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | URL Matching | Parameters | Check Exists |
|:---|:---:|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ…** | **âœ…** |
| FastRoute | âœ… | âœ… | âš ï¸ |
| Symfony | âœ… | âœ… | âœ… |
| Laravel | âœ… | âœ… | âœ… |
| Slim | âœ… | âœ… | âš ï¸ |
| AltoRouter | âœ… | âœ… | âš ï¸ |

---

### 16. URL Generation

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ URL Ğ¸Ğ· Ğ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ².

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```php
use CloudCastle\Http\Router\UrlGenerator;

$generator = new UrlGenerator($router);
$generator->setBaseUrl('https://example.com');

// ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ URL
$url = $generator->generate('home');
// https://example.com/

// Ğ¡ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸
$url = $generator->generate('users.show', ['id' => 123]);
// https://example.com/users/123

// Ğ¡ query parameters
$url = $generator->generate('users.show', 
    ['id' => 123],
    ['edit' => 1, 'tab' => 'profile']
);
// https://example.com/users/123?edit=1&tab=profile

// Absolute URL (Ñ Ğ°Ğ²Ñ‚Ğ¾-Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸ĞµĞ¼ base)
$url = $generator->absolute('posts.show', [
    'year' => 2025,
    'month' => 10,
    'slug' => 'my-post'
]);
// https://detected-host.com/posts/2025/10/my-post
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ URL
- âœ… Ğ ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³-safe
- âœ… Type-safe parameters
- âœ… Query string support

---

### 17. Route Dumper

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ´Ğ»Ñ debugging Ğ¸ documentation.

**Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°:**
- JSON
- CLI Table
- Array

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
use CloudCastle\Http\Router\RouteDumper;

$dumper = new RouteDumper($router);

// JSON export (Ğ´Ğ»Ñ API)
$json = $dumper->dumpJson();
file_put_contents('routes.json', $json);

// CLI table (Ğ´Ğ»Ñ ĞºĞ¾Ğ½ÑĞ¾Ğ»Ğ¸)
echo $dumper->dumpTable();
// --------------------------------------------------------
// | METHOD | URI         | NAME        | ACTION          |
// --------------------------------------------------------
// | GET    | /users      | users.index | UserController  |
// | POST   | /users      | users.store | UserController  |
// --------------------------------------------------------

// Array (Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ½Ğ¾Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸)
$routes = $dumper->dump();
foreach ($routes as $route) {
    echo $route['methods'][0] . ' ' . $route['uri'] . "\n";
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:**
- Documentation generation
- Debugging
- Route analysis
- API documentation
- Postman/Swagger export

---

### 18. Route Defaults

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ².

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
// ĞĞ´Ğ½Ğ¾ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
$router->get('/page/{num}', 'PageController@show')
    ->default('num', 1);
// /page â†’ num = 1
// /page/5 â†’ num = 5

// ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ defaults
$router->get('/archive/{year}/{month}', 'ArchiveController@show')
    ->defaults([
        'year' => 2025,
        'month' => 1
    ]);
// /archive â†’ year = 2025, month = 1
// /archive/2024 â†’ year = 2024, month = 1
// /archive/2024/12 â†’ year = 2024, month = 12

// ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ñ requirements
$router->get('/blog/{category}/{page}', 'BlogController@index')
    ->where('category', '\w+')
    ->where('page', '\d+')
    ->defaults(['category' => 'all', 'page' => 1]);
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | Defaults | Multiple | Types |
|:---|:---:|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ…** | **âœ… All** |
| FastRoute | âŒ | - | - |
| Symfony | âœ… | âœ… | âœ… All |
| Laravel | âœ… | âœ… | âš ï¸ Limited |
| Slim | âš ï¸ | âš ï¸ | âš ï¸ |
| AltoRouter | âœ… | âš ï¸ | âš ï¸ |

---

### 19. Route Conditions

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ´Ğ»Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Expression Language.

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
// ĞÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ½Ğ° Ñ€Ğ¾Ğ»Ğ¸
$router->get('/admin', 'AdminController@index')
    ->condition('role == "admin"');

// ĞÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ½Ğ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞµ
$router->get('/premium', 'PremiumController@content')
    ->condition('subscription == "premium" or subscription == "enterprise"');

// Ğ’ĞµÑ€ÑĞ¸Ñ API
$router->get('/api/v2/data', 'ApiV2Controller@data')
    ->condition('api_version >= 2');

// ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹
$router->get('/special', 'SpecialController@index')
    ->condition('user.age >= 18 and user.verified and user.subscription == "premium"');
```

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | Conditions |
|:---|:---:|
| **CloudCastle** | **âœ… Expression Language** |
| FastRoute | âŒ |
| Symfony | âœ… Expression Language |
| Laravel | âš ï¸ Basic |
| Slim | âŒ |
| AltoRouter | âŒ |

---

### 20. Domain Routing

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ² Ğ¸ Ğ¿Ğ¾Ğ´Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ².

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
// ĞŸĞ¾Ğ´Ğ´Ğ¾Ğ¼ĞµĞ½ API
$router->get('/data', 'ApiController@data')
    ->domain('api.example.com');

// Wildcard Ğ¿Ğ¾Ğ´Ğ´Ğ¾Ğ¼ĞµĞ½Ñ‹
$router->get('/dashboard', 'TenantController@dashboard')
    ->domain('{tenant}.example.com');

// Multi-domain
$router->group(['domain' => 'admin.example.com'], function($router) {
    $router->get('/users', 'Admin\UserController@index');
    $router->get('/settings', 'Admin\SettingsController@index');
});
```

**ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:**
- Multi-tenant applications
- Subdomain routing
- API versioning
- Admin panels

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | Domain Routing | Wildcards |
|:---|:---:|:---:|
| **CloudCastle** | **âœ…** | **âœ…** |
| FastRoute | âŒ | âŒ |
| Symfony | âœ… | âœ… |
| Laravel | âœ… | âœ… |
| Slim | âŒ | âŒ |
| AltoRouter | âŒ | âŒ |

---

### 21. Port Routing

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ².

**Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ°!**

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
```php
// ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°
$router->get('/users', 'UserService@index')
    ->port(8081);

$router->get('/posts', 'PostService@index')
    ->port(8082);

$router->get('/comments', 'CommentService@index')
    ->port(8083);
```

**ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:**
- Microservices architecture
- Service isolation
- Port-based routing
- Development environments

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ:**

| Router | Port Routing |
|:---|:---:|
| **CloudCastle** | **âœ…** |
| FastRoute | âŒ |
| Symfony | âš ï¸ Complex |
| Laravel | âŒ |
| Slim | âŒ |
| AltoRouter | âŒ |

---

### 22. Auto-Naming (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ°!)

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ¼Ñ‘Ğ½ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ².

```php
$router->enableAutoNaming();

$router->get('/users/{id}', 'UserController@show');
// Auto name: users.id.get

$router->get('/api/v1/posts', 'PostController@index');
// Auto name: api.v1.posts.get
```

**ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°:**
- `/users` â†’ `users.get`
- `/users/{id}` â†’ `users.id.get`
- `/api/v1/data` â†’ `api.v1.data.get`
- `/` â†’ `root.get`

[ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Auto-Naming](auto-naming.md)

### 23. ThrottleWithBan (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ñ‡Ğ°!)

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Rate limiting Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ Ğ±Ğ°Ğ½Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸.

```php
$router->get('/api/data', 'ApiController@data')
    ->throttleWithBan(
        maxAttempts: 100,        // Ğ»Ğ¸Ğ¼Ğ¸Ñ‚
        decayMinutes: 1,         // Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´
        maxViolations: 3,        // Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹ Ğ´Ğ¾ Ğ±Ğ°Ğ½Ğ°
        banDurationMinutes: 60   // Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ±Ğ°Ğ½Ğ°
    );
```

**Ğ­Ñ„Ñ„ĞµĞºÑ‚:**
- 101-Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ â†’ violation 1
- 101-Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ (2nd window) â†’ violation 2
- 101-Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ (3rd window) â†’ violation 3
- Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ â†’ **BAN Ğ½Ğ° 1 Ñ‡Ğ°Ñ!**

[ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ ThrottleWithBan](throttle-with-ban.md)

### 24. Route Macros

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ğ¹.

```php
// RESTful resource - 7 Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ²!
Route::resource('users', 'UserController');

// API resource
Route::apiResource('posts', 'Api\PostController', 200);

// CRUD - 4 Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°
Route::crud('comments', 'CommentController');

// Auth routes
Route::auth();

// Admin panel
Route::adminPanel(['office-ip']);

// API versioning
Route::apiVersion('v1', function() {
    Route::apiResource('users', 'Api\V1\UserController', 1000);
});

// Webhooks
Route::webhooks(['webhook-ip']);
```

**Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ**: 80-97% ĞºĞ¾Ğ´Ğ°!

[ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Macros](macros.md)

### 25. Route Shortcuts

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ£Ğ´Ğ¾Ğ±Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ´Ğ»Ñ Ñ‡Ğ°ÑÑ‚Ñ‹Ñ… ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹.

**Middleware shortcuts:**
```php
->auth()      // Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ->middleware('auth')
->guest()     // Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ->middleware('guest')
->api()       // Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ->middleware('api')
->admin()     // Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ->middleware(['auth','admin'])+tag('admin')
```

**Security shortcuts:**
```php
->localhost()         // Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ->whitelistIp(['127.0.0.1'])
->secure()            // Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ->port(443)->protocol('https')
```

**Throttle shortcuts:**
```php
->throttleStandard()  // 60 req/min
->throttleStrict()    // 10 req/min
->throttleGenerous()  // 1000 req/min
```

**Composite shortcuts:**
```php
->apiEndpoint(100)   // api + throttle(100) + tag
->protected()        // auth + throttle(100)
```

[ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Shortcuts](shortcuts.md)

### 26. Helper Functions

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: 15+ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹.

```php
// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ²
route('users.show')      // Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸
current_route()          // Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹
previous_route()         // Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğ¹

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
route_is('users.index')  // Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾
route_has('admin.panel') // ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
route_name()             // Ğ¸Ğ¼Ñ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾

// URL generation
route_url('users.show', ['id' => 123])
route_back('/')

// Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
routes_by_tag('api')

// Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
route_stats()

// Dispatch
dispatch_route()

// Router instance
router()
```

[ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Helpers](helpers.md)

### 27. Tags System

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ¿Ğ¾ Ñ‚ĞµĞ³Ğ°Ğ¼.

```php
// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ³Ğ¾Ğ²
$router->get('/api/data', 'ApiController@data')
    ->tag('api')
    ->tag(['public', 'free']);

// Ğ’ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°Ñ…
$router->group(['tags' => ['api', 'v1']], function($router) {
    $router->get('/users', ...);
});

// Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
$apiRoutes = routes_by_tag('api');
$adminRoutes = routes_by_tag('admin');
```

[ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Tags](tags.md)

### 28. Protocol Filtering

```php
// Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ HTTPS
$router->get('/secure', 'SecureController@index')
    ->protocol('https');

// WebSocket
$router->get('/ws', 'WebSocketController@handle')
    ->protocol('ws');
```

### 29. Route Caching

```php
$cache = new RouteCache(__DIR__ . '/cache/routes.php');
$router->setCache($cache);

// 7x faster load time!
```

### 30. Analytics Plugin

```php
$analytics = new AnalyticsPlugin();
$router->registerGlobalPlugin($analytics);

$stats = $analytics->getStats();
// Route hits, timing, errors, etc.
```

### 31. Plugins System

```php
$logger = new LoggerPlugin($psr3Logger);
$router->registerGlobalPlugin($logger);

$responseCache = new ResponseCachePlugin(__DIR__ . '/cache/responses');
$router->registerGlobalPlugin($responseCache);
```

### 32. Facade/Static API

```php
use CloudCastle\Http\Router\Facade\Route;

// Laravel-style static API
Route::get('/users', 'UserController@index');
Route::resource('posts', 'PostController');
Route::group(['prefix' => 'api'], function() {
    Route::apiResource('data', 'ApiController', 200);
});
```

[ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Facade](facade.md)

## ğŸ“Š Ğ¡Ğ²Ğ¾Ğ´Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ²ÑĞµÑ… Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹

| â„– | Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ | CloudCastle | FastRoute | Symfony | Laravel | Slim | Alto |
|:---:|:---|:---:|:---:|:---:|:---:|:---:|:---:|
| 1 | RESTful routing | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| 2 | Named routes | âœ… | âŒ | âœ… | âœ… | âœ… | âœ… |
| 3 | Route groups | âœ… | âŒ | âœ… | âœ… | âœ… | âŒ |
| 4 | Middleware | âœ… | âŒ | âš ï¸ | âœ… | âœ… | âŒ |
| 5 | PSR-15 | âœ… | âŒ | âŒ | âŒ | âœ… | âŒ |
| 6 | Rate Limiting | âœ… | âŒ | âŒ | âœ… | âŒ | âŒ |
| 7 | **Auto-ban** | **âœ…** | **âŒ** | **âŒ** | **âŒ** | **âŒ** | **âŒ** |
| 8 | **IP Filtering** | **âœ…** | **âŒ** | **âŒ** | **âŒ** | **âŒ** | **âŒ** |
| 9 | **SSRF Protection** | **âœ…** | **âŒ** | **âŒ** | **âŒ** | **âŒ** | **âŒ** |
| 10 | YAML config | âœ… | âŒ | âœ… | âŒ | âŒ | âŒ |
| 11 | XML config | âœ… | âŒ | âœ… | âŒ | âŒ | âŒ |
| 12 | **JSON config** | **âœ…** | **âŒ** | **âŒ** | **âŒ** | **âŒ** | **âŒ** |
| 13 | PHP Attributes | âœ… | âŒ | âœ… | âš ï¸ | âŒ | âŒ |
| 14 | Expression Language | âœ… | âŒ | âœ… | âŒ | âŒ | âŒ |
| 15 | URL Matching | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| 16 | URL Generation | âœ… | âŒ | âœ… | âœ… | âœ… | âœ… |
| 17 | Route Dumper | âœ… | âŒ | âš ï¸ | âš ï¸ | âŒ | âŒ |
| 18 | Route Defaults | âœ… | âŒ | âœ… | âœ… | âš ï¸ | âš ï¸ |
| 19 | Route Conditions | âœ… | âŒ | âœ… | âš ï¸ | âŒ | âŒ |
| 20 | Domain routing | âœ… | âŒ | âœ… | âœ… | âŒ | âŒ |
| 21 | **Port routing** | **âœ…** | **âŒ** | **âš ï¸** | **âŒ** | **âŒ** | **âŒ** |
| 22 | Protocol filtering | âœ… | âŒ | âš ï¸ | âš ï¸ | âŒ | âŒ |
| 23 | Route caching | âœ… | âœ… | âœ… | âœ… | âŒ | âŒ |
| 24 | **Analytics** | **âœ…** | **âŒ** | **âŒ** | **âš ï¸** | **âŒ** | **âŒ** |
| 25 | **Plugins** | **âœ…** | **âŒ** | **âŒ** | **âŒ** | **âŒ** | **âŒ** |
| 26 | **Security Logger** | **âœ…** | **âŒ** | **âŒ** | **âŒ** | **âŒ** | **âŒ** |
| 27 | **Route Macros** | **âœ… 7+** | **âŒ** | **âš ï¸ 2** | **âœ… 5** | **âŒ** | **âŒ** |
| 28 | **Route Shortcuts** | **âœ… 13+** | **âŒ** | **âš ï¸ 3** | **âœ… 8** | **âš ï¸ 2** | **âŒ** |
| 29 | **Helper Functions** | **âœ… 15+** | **âŒ** | **âš ï¸ 4** | **âœ… 8** | **âŒ** | **âŒ** |
| 30 | **Tags System** | **âœ…** | **âŒ** | **âš ï¸** | **âš ï¸** | **âŒ** | **âŒ** |
| 31 | **Auto-Naming** | **âœ…** | **âŒ** | **âŒ** | **âŒ** | **âŒ** | **âŒ** |
| 32 | **ThrottleWithBan** | **âœ…** | **âŒ** | **âŒ** | **âŒ** | **âŒ** | **âŒ** |
| 33 | **Facade/Static** | **âœ…** | **âŒ** | **âŒ** | **âœ…** | **âŒ** | **âŒ** |
| | **Ğ˜Ğ¢ĞĞ“Ğ** | **33/33** | **3/33** | **11/33** | **12/33** | **7/33** | **4/33** |
| | **ĞŸÑ€Ğ¾Ñ†ĞµĞ½Ñ‚** | **100%** | **9%** | **33%** | **36%** | **21%** | **12%** |

---

## âœ… Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

CloudCastle HTTP Router Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ **Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹** Ğ´Ğ»Ñ Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ñ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹:

- ğŸ† **33/33 Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸** - 100% feature coverage
- ğŸ† **11 ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ„Ğ¸Ñ‡** - Ğ½ĞµÑ‚ Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ² Ñƒ ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ¾Ğ² (Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ JSON ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ)
- ğŸ† **100% ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ** Ñ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ°Ğ¼Ğ¸ (PSR-15, PHP 8.2+)
- ğŸ† **Enterprise-ready** - Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº production

**Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹:**
- [Auto-Naming](auto-naming.md) - Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- [ThrottleWithBan](throttle-with-ban.md) - rate limiting + ban
- [Macros](macros.md) - Ğ²ÑĞµ Ğ¼Ğ°ĞºÑ€Ğ¾ÑÑ‹ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾
- [Shortcuts](shortcuts.md) - Ğ²ÑĞµ ÑĞ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ
- [Helpers](helpers.md) - Ğ²ÑĞµ helper Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
- [Tags](tags.md) - ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ñ‚ĞµĞ³Ğ¾Ğ²
- [Facade](facade.md) - ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

---

*ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ: 18 Ğ¾ĞºÑ‚ÑĞ±Ñ€Ñ 2025*

---

[ğŸ“š ĞĞ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ](_table-of-contents.md) | [ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ](README.md)
