# –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

[English](../../en/features/ROUTING_FEATURES.md) | **–†—É—Å—Å–∫–∏–π** | [Deutsch](../../de/features/ROUTING_FEATURES.md) | [Fran√ßais](../../fr/features/ROUTING_FEATURES.md) | [‰∏≠Êñá](../../zh/features/ROUTING_FEATURES.md)

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [HTTP Methods](#http-methods)
- [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤](#–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–º–∞—Ä—à—Ä—É—Ç–æ–≤)
- [–ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã](#–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ-–º–∞—Ä—à—Ä—É—Ç—ã)
- [–¢–µ–≥–∏](#—Ç–µ–≥–∏)
- [–ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤](#–≥—Ä—É–ø–ø—ã-–º–∞—Ä—à—Ä—É—Ç–æ–≤)
- [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-—Å-–∞–Ω–∞–ª–æ–≥–∞–º–∏)

---

## HTTP Methods

### GET Method

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –¥–ª—è GET –∑–∞–ø—Ä–æ—Å–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
use CloudCastle\Http\Router\Router;

$router = new Router();

$router->get('/users', function() {
    return json_encode(['users' => [...] ]);
});

// –° –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º
$router->get('/users', [UserController::class, 'index']);

// –°–æ —Å—Ç—Ä–æ–∫–æ–π
$router->get('/users', 'UserController@index');
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏:**

| –†–æ—É—Ç–µ—Ä | –°–∏–Ω—Ç–∞–∫—Å–∏—Å | –ì–∏–±–∫–æ—Å—Ç—å | –û—Ü–µ–Ω–∫–∞ |
|--------|-----------|----------|--------|
| **CloudCastle** | `$router->get($uri, $action)` | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Laravel | `Route::get($uri, $action)` | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Symfony | `$routes->add('name', new Route($uri))` | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| FastRoute | `$r->addRoute('GET', $uri, $handler)` | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| Slim | `$app->get($uri, $callable)` | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π API
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ actions
- ‚úÖ Fluent interface
- ‚úÖ Method chaining

**–ú–∏–Ω—É—Å—ã:**
- –ù–µ—Ç (–∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è read-only –æ–ø–µ—Ä–∞—Ü–∏–π
2. –ö–µ—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã GET –∑–∞–ø—Ä–æ—Å–æ–≤
3. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ rate limiting –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö endpoint'–∞—Ö

---

### POST Method

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤).

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
$router->post('/users', function() {
    // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    $data = json_decode(file_get_contents('php://input'), true);
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    return json_encode(['id' => 123, 'status' => 'created']);
});

// –° rate limiting
$router->post('/users', $action)
    ->throttle(10, 1); // 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

| –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å | CloudCastle | Laravel | Symfony | FastRoute |
|-------------|-------------|---------|---------|-----------|
| –°–∏–Ω—Ç–∞–∫—Å–∏—Å | ‚úÖ –ü—Ä–æ—Å—Ç–æ–π | ‚úÖ –ü—Ä–æ—Å—Ç–æ–π | ‚ö†Ô∏è –°–ª–æ–∂–Ω—ã–π | ‚úÖ –ü—Ä–æ—Å—Ç–æ–π |
| Rate limiting | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç |
| –í–∞–ª–∏–¥–∞—Ü–∏—è | ‚ö†Ô∏è –†—É—á–Ω–∞—è | ‚úÖ Form Request | ‚úÖ Validator | ‚ùå –ù–µ—Ç |

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π rate limiting
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ –¶–µ–ø–æ—á–∫–∞ –º–µ—Ç–æ–¥–æ–≤

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ rate limiting –Ω–∞ POST
2. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ HTTPS –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CSRF –∑–∞—â–∏—Ç—É

```php
// –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
$router->post('/api/users', $action)
    ->throttle(20, 1)        // 20 –≤ –º–∏–Ω—É—Ç—É
    ->https()                // –¢–æ–ª—å–∫–æ HTTPS
    ->middleware(['csrf']);  // CSRF –∑–∞—â–∏—Ç–∞
```

---

### PUT/PATCH Methods

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤.

**–†–∞–∑–ª–∏—á–∏—è:**
- **PUT:** –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞
- **PATCH:** –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
// PUT - –ø–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
$router->put('/users/{id}', function($id) {
    // –û–±–Ω–æ–≤–∏—Ç—å –í–°–ï –ø–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
});

// PATCH - —á–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
$router->patch('/users/{id}', function($id) {
    // –û–±–Ω–æ–≤–∏—Ç—å –¢–û–õ–¨–ö–û –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—è
});
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

| –†–æ—É—Ç–µ—Ä | PUT | PATCH | –°–µ–º–∞–Ω—Ç–∏–∫–∞ | –û—Ü–µ–Ω–∫–∞ |
|--------|-----|-------|-----------|--------|
| **CloudCastle** | ‚úÖ | ‚úÖ | **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Laravel | ‚úÖ | ‚úÖ | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Symfony | ‚úÖ | ‚úÖ | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| FastRoute | ‚úÖ | ‚úÖ | –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê |

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è HTTP —Å–µ–º–∞–Ω—Ç–∏–∫–∞
- ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—ã–π API

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. PUT –¥–ª—è –∑–∞–º–µ–Ω—ã —Ä–µ—Å—É—Ä—Å–∞ —Ü–µ–ª–∏–∫–æ–º
2. PATCH –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π
3. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

```php
// PUT - –ø–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞
$router->put('/users/{id}', $action)
    ->middleware(['auth'])
    ->throttle(30, 1);

// PATCH - —á–∞—Å—Ç–∏—á–Ω–æ–µ
$router->patch('/users/{id}/status', $action)
    ->middleware(['auth'])
    ->throttle(50, 1);
```

---

### DELETE Method

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
$router->delete('/users/{id}', function($id) {
    // –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    return json_encode(['status' => 'deleted']);
});

// –° –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
$router->delete('/users/{id}', $action)
    ->middleware(['auth', 'confirm-delete']);
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

**CloudCastle:**
```php
Route::delete('/users/{id}', $action)
    ->middleware(['auth', 'admin'])
    ->throttle(10, 1);
```

**Laravel:**
```php
Route::delete('/users/{id}', $action)
    ->middleware(['auth', 'admin'])
    ->throttle(10);
```

**Symfony:**
```php
$routes->add('user.delete', new Route('/users/{id}', [
    '_controller' => '...',
], [], [], '', [], ['DELETE']
));
```

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π rate limiting
- ‚úÖ Fluent interface

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –í—Å–µ–≥–¥–∞ —Ç—Ä–µ–±—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
2. –°—Ç—Ä–æ–≥–∏–π rate limiting
3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏–π
4. Soft delete –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

---

### ANY Method

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞—Ä—à—Ä—É—Ç –æ—Ç–≤–µ—á–∞—é—â–∏–π –Ω–∞ –í–°–ï HTTP –º–µ—Ç–æ–¥—ã.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
$router->any('/webhook', function() {
    $method = $_SERVER['REQUEST_METHOD'];
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª—é–±–æ–≥–æ –º–µ—Ç–æ–¥–∞
    return "Received: $method";
});
```

**–ú–µ—Ç–æ–¥—ã –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ –≤ ANY:**
- GET, POST, PUT, PATCH, DELETE
- OPTIONS, HEAD, VIEW

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

| –†–æ—É—Ç–µ—Ä | ANY support | –ú–µ—Ç–æ–¥–æ–≤ | –û—Ü–µ–Ω–∫–∞ |
|--------|-------------|---------|--------|
| **CloudCastle** | ‚úÖ | **8** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Laravel | ‚úÖ | 7 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Symfony | ‚ö†Ô∏è Manual | All | ‚≠ê‚≠ê‚≠ê‚≠ê |
| FastRoute | ‚ùå | - | ‚≠ê‚≠ê |

**–ü–ª—é—Å—ã:**
- ‚úÖ –£–¥–æ–±–Ω–æ –¥–ª—è webhooks
- ‚úÖ –û–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ú–µ–Ω–µ–µ RESTful
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è webhooks
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è CORS preflight
3. –ò–∑–±–µ–≥–∞–π—Ç–µ –¥–ª—è REST API
4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –º–µ—Ç–æ–¥—ã –≤–Ω—É—Ç—Ä–∏ action

```php
// –•–æ—Ä–æ—à–∏–π –ø—Ä–∏–º–µ—Ä - webhook
$router->any('/webhooks/github', function() {
    $method = $_SERVER['REQUEST_METHOD'];
    match($method) {
        'POST' => handleWebhook(),
        'GET' => showWebhookInfo(),
        default => http_response_code(405)
    };
});
```

---

### MATCH Method

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞—Ä—à—Ä—É—Ç –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
// –¢–æ–ª—å–∫–æ GET –∏ POST
$router->match(['GET', 'POST'], '/form', function() {
    if ($_SERVER['REQUEST_METHOD'] === 'GET') {
        return showForm();
    }
    return processForm();
});
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

**CloudCastle:**
```php
Route::match(['GET', 'POST'], '/contact', $action);
```

**Laravel:**
```php
Route::match(['GET', 'POST'], '/contact', $action);
```

**Symfony:**
```php
new Route('/contact', [...], [], [], '', [], ['GET', 'POST'])
```

**FastRoute:**
```php
$r->addRoute(['GET', 'POST'], '/contact', $handler);
```

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- ‚úÖ –ö–∞–∫ –≤ Laravel
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –§–æ—Ä–º—ã (GET –ø–æ–∫–∞–∑–∞—Ç—å, POST –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å)
2. Dual endpoints (GET –¥–ª—è info, POST –¥–ª—è action)
3. CORS handling

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```php
// –§–æ—Ä–º–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
Route::match(['GET', 'POST'], '/contact', ContactController::class)
    ->throttle(10, 1);  // –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞

// API endpoint —Å –æ–ø—Ü–∏—è–º–∏
Route::match(['GET', 'OPTIONS'], '/api/data', $action);
```

---

### Custom HTTP Methods

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö HTTP –º–µ—Ç–æ–¥–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
// VIEW –º–µ—Ç–æ–¥
$router->view('/page', $action);

// –õ—é–±–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –º–µ—Ç–æ–¥
$router->custom('PURGE', '/cache', function() {
    // –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
    clearCache();
});

$router->custom('TRACE', '/debug', $action);
$router->custom('CONNECT', '/proxy', $action);
```

**–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:**

| –†–æ—É—Ç–µ—Ä | Custom Methods | VIEW –º–µ—Ç–æ–¥ | –û—Ü–µ–Ω–∫–∞ |
|--------|----------------|------------|--------|
| **CloudCastle** | ‚úÖ **–î–∞** | ‚úÖ **–í—Å—Ç—Ä–æ–µ–Ω** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Laravel | ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ | ‚ùå –ù–µ—Ç | ‚≠ê‚≠ê‚≠ê |
| Symfony | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚≠ê‚≠ê‚≠ê‚≠ê |
| FastRoute | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚≠ê‚≠ê‚≠ê‚≠ê |

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ VIEW –º–µ—Ç–æ–¥ –≤—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ custom() –º–µ—Ç–æ–¥ –¥–ª—è –ª—é–±—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ API

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

**VIEW –º–µ—Ç–æ–¥ (—É–Ω–∏–∫–∞–ª—å–Ω–∞—è —Ñ–∏—á–∞):**
```php
// –î–ª—è read-only –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –±–µ–∑ side effects
Route::view('/dashboard', fn() => renderDashboard())
    ->middleware(['auth']);
```

**PURGE –º–µ—Ç–æ–¥ (–¥–ª—è –∫–µ—à–∞):**
```php
Route::custom('PURGE', '/cache/{key}', function($key) {
    Cache::forget($key);
    return ['status' => 'purged'];
})->whitelistIp(['127.0.0.1']);
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. VIEW –¥–ª—è read-only –æ–ø–µ—Ä–∞—Ü–∏–π
2. PURGE –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ (CDN —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
3. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ IP
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç–æ–¥—ã

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ URI.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
// –û–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä
Route::get('/users/{id}', function($id) {
    return "User ID: $id";
});

// –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
Route::get('/posts/{category}/{slug}', function($category, $slug) {
    return "Category: $category, Slug: $slug";
});

// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞:**

**CloudCastle:**
```php
Route::get('/users/{id}', fn($id) => "User $id");
```

**Laravel:**
```php
Route::get('/users/{id}', fn($id) => "User $id");
```

**Symfony:**
```php
new Route('/users/{id}', ['_controller' => fn($id) => "User $id"])
```

**FastRoute:**
```php
$r->addRoute('GET', '/users/{id:\d+}', $handler);
```

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ –ß–∏—Å—Ç—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–∞–∫ Laravel
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ inline patterns

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. –í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
3. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ where() –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

---

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ (where)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ regex.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
// –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
Route::get('/users/{id}', $action)
    ->where('id', '[0-9]+');

// –¢–æ–ª—å–∫–æ –±—É–∫–≤—ã –∏ –¥–µ—Ñ–∏—Å—ã
Route::get('/posts/{slug}', $action)
    ->where('slug', '[a-z0-9-]+');

// –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
Route::get('/posts/{year}/{month}', $action)
    ->where([
        'year' => '[0-9]{4}',
        'month' => '0[1-9]|1[0-2]'
    ]);

// Email —Ñ–æ—Ä–º–∞—Ç
Route::get('/verify/{email}', $action)
    ->where('email', '[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}');
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

| –†–æ—É—Ç–µ—Ä | Where –º–µ—Ç–æ–¥ | Inline patterns | Global patterns | –û—Ü–µ–Ω–∫–∞ |
|--------|-------------|-----------------|-----------------|--------|
| **CloudCastle** | ‚úÖ | ‚úÖ | ‚ö†Ô∏è –ù–µ—Ç | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Laravel | ‚úÖ | ‚ùå | ‚úÖ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Symfony | ‚úÖ Requirements | ‚ùå | ‚úÖ | ‚≠ê‚≠ê‚≠ê‚≠ê |
| FastRoute | ‚ùå | ‚úÖ –¢–æ–ª—å–∫–æ | ‚ùå | ‚≠ê‚≠ê‚≠ê |

**Inline patterns –≤ CloudCastle:**
```php
// –ú–æ–∂–Ω–æ –∏ —Ç–∞–∫
Route::get('/users/{id:[0-9]+}', $action);

// –ò —Ç–∞–∫
Route::get('/users/{id}', $action)->where('id', '[0-9]+');
```

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ –î–≤–∞ —Å–ø–æ—Å–æ–±–∞: where() –∏ inline
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- ‚úÖ Fluent API

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (–∫–∞–∫ –≤ Laravel)

**–£–ª—É—á—à–µ–Ω–∏–µ –¥–ª—è CloudCastle:**
```php
// –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º:
Router::pattern('id', '[0-9]+');
Router::pattern('slug', '[a-z0-9-]+');
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ where() –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```php
// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
const PATTERN_ID = '[0-9]+';
const PATTERN_SLUG = '[a-z0-9-]+';
const PATTERN_UUID = '[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}';

Route::get('/users/{id}', $action)->where('id', PATTERN_ID);
Route::get('/posts/{slug}', $action)->where('slug', PATTERN_SLUG);
Route::get('/orders/{uuid}', $action)->where('uuid', PATTERN_UUID);
```

---

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
// –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
Route::get('/search/{query?}', function($query = null) {
    if ($query === null) {
        return "Show search form";
    }
    return "Search for: $query";
});

// –° –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
Route::get('/page/{page?}', function($page = 1) {
    return "Page: $page";
});
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

| –†–æ—É—Ç–µ—Ä | –°–∏–Ω—Ç–∞–∫—Å–∏—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ | Defaults | –û—Ü–µ–Ω–∫–∞ |
|--------|--------------------------|----------|--------|
| **CloudCastle** | `{param?}` | ‚úÖ –í closure | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Laravel | `{param?}` | ‚úÖ –í closure | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Symfony | Defaults –≤ Route | ‚úÖ | ‚≠ê‚≠ê‚≠ê‚≠ê |
| FastRoute | `[{param}]` | ‚ö†Ô∏è –†—É—á–Ω–æ–µ | ‚≠ê‚≠ê‚≠ê |

**–ü–ª—é—Å—ã CloudCastle:**
- ‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ({param?})
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ Laravel
- ‚úÖ Defaults –≤ closure

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```php
// –ü–∞–≥–∏–Ω–∞—Ü–∏—è
Route::get('/products/{page?}', function($page = 1) {
    $products = Product::paginate(20, $page);
    return json_encode($products);
})->where('page', '[0-9]+');

// –ü–æ–∏—Å–∫
Route::get('/search/{query?}', function($query = null) {
    if (!$query) {
        return ['results' => [], 'message' => 'Enter search query'];
    }
    return ['results' => search($query)];
});

// –§–∏–ª—å—Ç—Ä
Route::get('/users/{role?}', function($role = 'all') {
    return User::byRole($role)->get();
})->where('role', 'admin|user|guest|all');
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
3. –í—Å–µ–≥–¥–∞ –∑–∞–¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ defaults
4. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

### Default Values

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
Route::get('/page/{page}', $action)
    ->defaults(['page' => 1]);

// –¢–µ–ø–µ—Ä—å /page –∏ /page/5 —Ä–∞–±–æ—Ç–∞—é—Ç
```

**–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:**

| –†–æ—É—Ç–µ—Ä | defaults() –º–µ—Ç–æ–¥ | –ì–¥–µ –∑–∞–¥–∞–µ—Ç—Å—è | –û—Ü–µ–Ω–∫–∞ |
|--------|------------------|--------------|--------|
| **CloudCastle** | ‚úÖ | **Route level** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Laravel | ‚ö†Ô∏è | Closure | ‚≠ê‚≠ê‚≠ê‚≠ê |
| Symfony | ‚úÖ | Route config | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| FastRoute | ‚ùå | Manual | ‚≠ê‚≠ê |

**–ü–ª—é—Å—ã:**
- ‚úÖ –Ø–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ defaults
- ‚úÖ –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç closure
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –º–∞—Ä—à—Ä—É—Ç–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
// API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å default
Route::get('/api/{version}/users', $action)
    ->defaults(['version' => 'v1'])
    ->where('version', 'v1|v2|v3');

// –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
Route::get('/{locale}/page', $action)
    ->defaults(['locale' => 'en'])
    ->where('locale', 'en|ru|de|fr');

// Sorting
Route::get('/products/{sort}', $action)
    ->defaults(['sort' => 'name'])
    ->where('sort', 'name|price|date');
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è API
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ defaults

---

[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏---–¥–µ—Ç–∞–ª—å–Ω–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ) | [üìö –í—Å–µ —Ñ–∏—á–∏](../ALL_FEATURES.md) | [üè† –ì–ª–∞–≤–Ω–∞—è](../../../README.md)

---

¬© 2024 CloudCastle HTTP Router. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

