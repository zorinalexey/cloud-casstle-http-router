# –û—Ç—á–µ—Ç PHPMetrics

**CloudCastle HTTP Router v1.1.1**  
**–î–∞—Ç–∞**: –û–∫—Ç—è–±—Ä—å 2025  
**–Ø–∑—ã–∫**: –†—É—Å—Å–∫–∏–π

---

## üåç –ü–µ—Ä–µ–≤–æ–¥—ã

- **[–†—É—Å—Å–∫–∏–π](phpmetrics.md)** (—Ç–µ–∫—É—â–∏–π)
- [English](../../en/reports/phpmetrics.md)
- [Deutsch](../../de/reports/phpmetrics.md)
- [Fran√ßais](../../fr/reports/phpmetrics.md)

---

## üìä –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### –†–∞–∑–º–µ—Ä –∫–æ–¥–∞

```
Lines of code (LOC):            4,148
Logical lines of code (LLOC):   2,627
Comment lines of code (CLOC):   1,517
Average volume:                 996.96
Average comment weight:         36.68%
Average intelligent content:    36.68
Logical LOC by class:           105
Logical LOC by method:          9
```

---

## üèóÔ∏è –û–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª–∞—Å—Å–æ–≤

```
Classes:                        25
Interfaces:                     2
Methods:                        279
Methods by class (avg):         11.16
Lack of cohesion (LCOM):        4.4
```

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

| –ö–ª–∞—Å—Å | –ú–µ—Ç–æ–¥–æ–≤ | LOC | Complexity |
|-------|---------|-----|------------|
| **Router** | 58 | 1,537 | 231 |
| **Route** | 33 | 551 | ~85 |
| **RateLimiter** | 19 | 387 | 52 |
| **BanManager** | 12 | 226 | ~25 |
| **RouteCollection** | 11 | 176 | ~18 |

---

## üîó Coupling (—Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å)

### –ú–µ—Ç—Ä–∏–∫–∏ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏

```
Average afferent coupling:      1.32
Average efferent coupling:      2.04
Average instability:            0.65
Depth of Inheritance Tree:      1.1
```

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

**Afferent Coupling (Ca)**: 1.32
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤, –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç –¥–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
- ‚úÖ –ù–∏–∑–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - —Ö–æ—Ä–æ—à–æ

**Efferent Coupling (Ce)**: 2.04
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–æ–≤, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å–∏—Ç –¥–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å
- ‚úÖ –ù–∏–∑–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - —Ö–æ—Ä–æ—à–æ

**Instability (I)**: 0.65
- I = Ce / (Ca + Ce)
- –ó–Ω–∞—á–µ–Ω–∏–µ 0.65 –æ–∑–Ω–∞—á–∞–µ—Ç —É–º–µ—Ä–µ–Ω–Ω—É—é —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

**Depth of Inheritance Tree**: 1.1
- –°—Ä–µ–¥–Ω—è—è –≥–ª—É–±–∏–Ω–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü–ª–æ—Å–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è - –æ—Ç–ª–∏—á–Ω–æ

---

## üì¶ Package –∞–Ω–∞–ª–∏–∑

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤

```
Packages:                                   6
Average classes per package:                4.5
Average distance:                           0.25
Average incoming class dependencies:        2.33
Average outgoing class dependencies:        4.33
Average incoming package dependencies:      1.17
Average outgoing package dependencies:      1.67
```

### –ü–∞–∫–µ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

1. **CloudCastle\Http\Router** (core)
2. **CloudCastle\Http\Router\Contracts**
3. **CloudCastle\Http\Router\Exceptions**
4. **CloudCastle\Http\Router\Facade**
5. **CloudCastle\Http\Router\Middleware**
6. **CloudCastle\Http\Router\Traits**

---

## üßÆ Complexity (—Å–ª–æ–∂–Ω–æ—Å—Ç—å)

### –ú–µ—Ç—Ä–∏–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

```
Average Cyclomatic complexity by class:     16.04
Average Weighted method count by class:     26.2
Average Relative system complexity:         439.52
Average Difficulty (Halstead):              11.99
```

### –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ –∫–ª–∞—Å—Å–∞–º

| –ö–ª–∞—Å—Å | Cyclomatic | Weighted MC | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è |
|-------|------------|-------------|---------------|
| **Router** | 231 | 350+ | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |
| **Route** | 85 | 120+ | –°—Ä–µ–¥–Ω—è—è |
| **RateLimiter** | 52 | 80+ | –°—Ä–µ–¥–Ω—è—è |
| **BanManager** | 25 | 40+ | –ù–∏–∑–∫–∞—è |
| **RouteCollection** | 18 | 30+ | –ù–∏–∑–∫–∞—è |

### –ú–µ—Ç–æ–¥—ã —Å –≤—ã—Å–æ–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é

| –ú–µ—Ç–æ–¥ | Cyclomatic | NPath | –°—Ç—Ä–æ–∫ |
|-------|------------|-------|-------|
| **Router::dispatch()** | 34 | 136,136 | 117 |
| **Router::addRoute()** | 21 | 122,880 | 105 |
| **Router::mergeGroupAttributes()** | 17 | 10,370 | 65 |
| **SsrfProtection::validateUrl()** | 10 | ~500 | 42 |
| **Router::loadFromCache()** | 10 | ~400 | 51 |

---

## üêõ –ü—Ä–æ–≥–Ω–æ–∑ –±–∞–≥–æ–≤ (Halstead)

### Halstead Metrics

```
Average bugs by class:          0.33
Average defects by class (Kan): 0.98
```

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

- **0.33 bugs/class**: –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ –±–∞–≥–æ–≤
- **0.98 defects/class**: –ü—Ä–∏–º–µ—Ä–Ω–æ 1 –¥–µ—Ñ–µ–∫—Ç –Ω–∞ –∫–ª–∞—Å—Å
- **–í—Å–µ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç—Å—è**: ~25 –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å**: –í —Ç–µ—Å—Ç–∞—Ö –Ω–∞–π–¥–µ–Ω–æ 0 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –±–∞–≥–æ–≤ ‚úÖ

**–í—ã–≤–æ–¥**: –ü—Ä–æ–≥–Ω–æ–∑ Halstead –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ–Ω, —Ä–µ–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤—ã—à–µ

---

## üìä Violations (–Ω–∞—Ä—É—à–µ–Ω–∏—è)

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ severity

```
Critical:     ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  0 (0%)
Error:        ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  9 (43%)
Warning:      ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  9 (43%)
Information:  ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  3 (14%)
```

### Violations –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|------------|-------------|
| **Code Size** | 9 | ‚ö†Ô∏è –ù–∏–∑–∫–∞—è |
| **Clean Code** | 8 | ‚ö†Ô∏è –ù–∏–∑–∫–∞—è |
| **Naming** | 3 | ‚úÖ –ù–µ –ø—Ä–æ–±–ª–µ–º–∞ |
| **Design** | 1 | ‚úÖ –ù–µ –ø—Ä–æ–±–ª–µ–º–∞ |
| **Controversial** | ~25 | ‚úÖ –ü–æ –¥–∏–∑–∞–π–Ω—É |

---

## üìà Maintainability Index

### –§–æ—Ä–º—É–ª–∞

```
MI = 171 - 5.2 * ln(Halstead Volume)
    - 0.23 * Cyclomatic Complexity
    - 16.2 * ln(LOC)
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
Average Maintainability Index:  ~115 (High)

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:
> 100: –í—ã—Å–æ–∫–∞—è maintainability   ‚úÖ
65-100: –°—Ä–µ–¥–Ω—è—è maintainability
< 65:  –ù–∏–∑–∫–∞—è maintainability
```

**CloudCastle**: ‚úÖ –í—ã—Å–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å

---

## üî¨ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | CloudCastle | Symfony | Laravel | FastRoute |
|---------|-------------|---------|---------|-----------|
| **LOC** | 4,148 | ~6,000 | ~8,000 | ~1,500 |
| **LLOC** | 2,627 | ~4,000 | ~5,500 | ~1,000 |
| **Classes** | 25 | ~35 | ~45 | ~8 |
| **Methods** | 279 | ~380 | ~520 | ~65 |
| **Avg Complexity** | 16.04 | ~18.5 | ~22.0 | ~12.0 |
| **Comment %** | 36.68% | ~30% | ~25% | ~20% |
| **LCOM** | 4.4 | ~5.2 | ~6.8 | ~3.1 |
| **Bugs (Halstead)** | 0.33 | ~0.45 | ~0.60 | ~0.25 |

---

## ‚úÖ –í—ã–≤–æ–¥—ã

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. **–•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - 36.68% –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
2. **–£–º–µ—Ä–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å** - 16.04 —Å—Ä–µ–¥–Ω–µ–µ
3. **–ù–∏–∑–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å** - Coupling < 3
4. **–ü–ª–æ—Å–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è** - DIT = 1.1
5. **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –º–∞–ª–æ –±–∞–≥–æ–≤** - 0.33/class

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

1. **–°–Ω–∏–∑–∏—Ç—å NPath complexity** –≤ –º–µ—Ç–æ–¥–∞—Ö Router::dispatch –∏ Router::addRoute
2. **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ Router** –Ω–∞ –º–µ–Ω—å—à–∏–µ –∫–ª–∞—Å—Å—ã
3. **–£–ª—É—á—à–∏—Ç—å cohesion** –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–ª–∞—Å—Å–æ–≤

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –º–µ—Ç—Ä–∏–∫

```
Code Size         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  80% (–û–ø—Ç–∏–º–∞–ª—å–Ω–æ)
Complexity        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  60% (–ü—Ä–∏–µ–º–ª–µ–º–æ)
Coupling          ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  95% (–û—Ç–ª–∏—á–Ω–æ)
Documentation     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë  95% (–û—Ç–ª–∏—á–Ω–æ)
Maintainability   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë  90% (–û—Ç–ª–∏—á–Ω–æ)
Bug Risk          ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  98% (–ù–∏–∑–∫–∏–π)
```

**–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞**: **86/100** ‚≠ê‚≠ê‚≠ê‚≠ê

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

- [PHPStan](phpstan.md)
- [PHPCS](phpcs.md)
- [PHPMD](phpmd.md)
- [–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ - –û–±—â–∏–π](static-analysis.md)

---

**–î–∞—Ç–∞**: –û–∫—Ç—è–±—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–¥–∞ –≤ –Ω–æ—Ä–º–µ

