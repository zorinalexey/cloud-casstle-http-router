# –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HTTP Router

[English](../en/TESTS_DETAILED.md) | **–†—É—Å—Å–∫–∏–π** | [Deutsch](../de/TESTS_DETAILED.md) | [Fran√ßais](../fr/TESTS_DETAILED.md) | [‰∏≠Êñá](../zh/TESTS_DETAILED.md)

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [1. PHPStan - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑](#1-phpstan---—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π-–∞–Ω–∞–ª–∏–∑)
- [2. PHPMD - –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞](#2-phpmd---–∞–Ω–∞–ª–∏–∑-–∫–∞—á–µ—Å—Ç–≤–∞-–∫–æ–¥–∞)
- [3. PHPCS - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞](#3-phpcs---–ø—Ä–æ–≤–µ—Ä–∫–∞-—Å—Ç–∏–ª—è-–∫–æ–¥–∞)
- [4. PHP-CS-Fixer - –ê–≤—Ç–æ—Ñ–∏–∫—Å —Å—Ç–∏–ª—è](#4-php-cs-fixer---–∞–≤—Ç–æ—Ñ–∏–∫—Å-—Å—Ç–∏–ª—è)
- [5. Rector - –ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞](#5-rector---–º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è-–∫–æ–¥–∞)
- [6. –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã](#6-—é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã)
- [7. –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#7-—Ç–µ—Å—Ç—ã-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- [8. –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#8-—Ç–µ—Å—Ç—ã-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- [9. –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã](#9-–Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ-—Ç–µ—Å—Ç—ã)
- [10. –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã](#10-—Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã)
- [11. –ë–µ–Ω—á–º–∞—Ä–∫–∏](#11-–±–µ–Ω—á–º–∞—Ä–∫–∏)

---

## 1. PHPStan - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

### –û–ø–∏—Å–∞–Ω–∏–µ

PHPStan - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è PHP, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ –±–µ–∑ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –û–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤, –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **–£—Ä–æ–≤–µ–Ω—å:** MAX (—Å–∞–º—ã–π —Å—Ç—Ä–æ–≥–∏–π –∏–∑ 10 —É—Ä–æ–≤–Ω–µ–π)
- **–§–∞–π–ª–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:** 88
- **–í–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:**
  - Strict Rules
  - Deprecation Rules
  - Type Coverage

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
> phpstan analyse src tests --level=max
88/88 [‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì] 100%

[OK] No errors
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –û–¢–õ–ò–ß–ù–û

**–ù–∞–π–¥–µ–Ω–æ –æ—à–∏–±–æ–∫:** 0

### –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

PHPStan –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª –Ω–∏ –æ–¥–Ω–æ–π –æ—à–∏–±–∫–∏ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏, —á—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ:

1. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –í—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω—ã –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
2. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤:** –í—Å–µ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤:** –ù–µ—Ç undefined –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Å–≤–æ–π—Å—Ç–≤, –º–µ—Ç–æ–¥–æ–≤
4. **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:** –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ PHP

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

‚úÖ **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–¥–µ–∞–ª—å–Ω–æ–µ**

- –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å MAX –≤ PHPStan
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å PHPStan –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–≤–µ—Ä–æ–∫ PHPStan

```php
// PHPStan –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
public function dispatch(
    string $uri,           // ‚úÖ –°—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
    string $method,        // ‚úÖ –°—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
    ?string $domain = null // ‚úÖ Nullable —Ç–∏–ø –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
): Route {                 // ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø —É–∫–∞–∑–∞–Ω
    // ...
}

// PHPStan –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤
$route = $router->dispatch('/api/users', 'GET');
// ‚úÖ PHPStan –∑–Ω–∞–µ—Ç, —á—Ç–æ $route –∏–º–µ–µ—Ç —Ç–∏–ø Route
$route->getName(); // ‚úÖ PHPStan –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –º–µ—Ç–æ–¥–∞ getName()
```

---

## 2. PHPMD - –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### –û–ø–∏—Å–∞–Ω–∏–µ

PHP Mess Detector (PHPMD) - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ –∫–æ–¥–µ PHP, —Ç–∞–∫–∏—Ö –∫–∞–∫:
- –ò–∑–ª–∏—à–Ω–µ —Å–ª–æ–∂–Ω—ã–π –∫–æ–¥
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥
- –ü–ª–æ—Ö–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
- –ù–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (phpmd.xml):
- **Clean Code:** –ß–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞
- **Code Size:** –†–∞–∑–º–µ—Ä –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
- **Controversial:** –°–ø–æ—Ä–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
- **Design:** –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Naming:** –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- **Unused Code:** –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
> phpmd src text phpmd.xml

(–ø—É—Å—Ç–æ–π –≤—ã–≤–æ–¥ - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º)
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –û–¢–õ–ò–ß–ù–û

**–ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º:** 0

### –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

PHPMD –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª:

1. **–°–ª–æ–∂–Ω–æ–≥–æ –∫–æ–¥–∞:**
   - –ù–µ—Ç –º–µ—Ç–æ–¥–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π —Ü–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é
   - –ù–µ—Ç —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –∏–ª–∏ –º–µ—Ç–æ–¥–æ–≤
   
2. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞:**
   - –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
   - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
   - –ù–µ—Ç –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞

3. **–ü—Ä–æ–±–ª–µ–º –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   - –ù–µ—Ç –∏–∑–ª–∏—à–Ω–µ–π —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ (coupling)
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –û–û–ü

4. **–ü—Ä–æ–±–ª–µ–º —Å –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º:**
   - –í—Å–µ –∏–º–µ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
   - –ò–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –º–µ—Ç–æ–¥–æ–≤, –∫–ª–∞—Å—Å–æ–≤ –ø–æ–Ω—è—Ç–Ω—ã –∏ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã

### –ü—Ä–∏–º–µ—Ä—ã —Ö–æ—Ä–æ—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```php
// ‚úÖ –•–æ—Ä–æ—à–µ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
class Router {
    private array $routes = [];
    
    public function addRoute(/* ... */): Route {
        // –ú–µ—Ç–æ–¥ –¥–µ–ª–∞–µ—Ç –æ–¥–Ω—É –≤–µ—â—å - –¥–æ–±–∞–≤–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç
    }
}

// ‚úÖ –ù–∏–∑–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
public function dispatch(string $uri, string $method): Route {
    // –õ–æ–≥–∏–∫–∞ —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –º–µ—Ç–æ–¥—ã
    $route = $this->findRouteOptimized($uri, $method);
    // ...
}
```

---

## 3. PHPCS - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞

### –û–ø–∏—Å–∞–Ω–∏–µ

PHP CodeSniffer (PHPCS) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–¥–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è. –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç PSR-12.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **–°—Ç–∞–Ω–¥–∞—Ä—Ç:** PSR-12 (PHP-FIG)
- **–ü—Ä–æ–≤–µ—Ä—è–µ–º–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** src/

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
> phpcs src --standard=PSR12

(–ø—É—Å—Ç–æ–π –≤—ã–≤–æ–¥ - –Ω–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–π)
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –û–¢–õ–ò–ß–ù–û

**–ù–∞–π–¥–µ–Ω–æ –Ω–∞—Ä—É—à–µ–Ω–∏–π:** 0

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

1. **–û—Ç—Å—Ç—É–ø—ã:**
   - 4 –ø—Ä–æ–±–µ–ª–∞ (–Ω–µ —Ç–∞–±—ã)
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å

2. **–°–∫–æ–±–∫–∏:**
   - –û—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Ñ–∏–≥—É—Ä–Ω–∞—è —Å–∫–æ–±–∫–∞ –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
   - –û—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Ñ–∏–≥—É—Ä–Ω–∞—è —Å–∫–æ–±–∫–∞ –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–µ –¥–ª—è –º–µ—Ç–æ–¥–æ–≤

3. **–ü—Ä–æ–±–µ–ª—ã:**
   - –ü—Ä–æ–±–µ–ª—ã –≤–æ–∫—Ä—É–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫

4. **–î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫:**
   - –ù–µ –±–æ–ª–µ–µ 120 —Å–∏–º–≤–æ–ª–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)

5. **–ò–º–ø–æ—Ä—Ç—ã:**
   - –£–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
   - –ù–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö use

### –ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è PSR-12

```php
<?php

declare(strict_types=1);

namespace CloudCastle\Http\Router;

use Closure;
use RuntimeException;

class Router
{
    private array $routes = [];

    public function addRoute(
        array $methods,
        string $uri,
        mixed $action
    ): Route {
        // –ö–æ–¥
    }
}
```

---

## 4. PHP-CS-Fixer - –ê–≤—Ç–æ—Ñ–∏–∫—Å —Å—Ç–∏–ª—è

### –û–ø–∏—Å–∞–Ω–∏–µ

PHP-CS-Fixer –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∏–ª—å –∫–æ–¥–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
> php-cs-fixer fix --dry-run --diff
Loaded config default from ".php-cs-fixer.php"
88/88 [‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì] 100%

Found 0 of 88 files that can be fixed
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –û–¢–õ–ò–ß–ù–û

**–§–∞–π–ª–æ–≤ —Ç—Ä–µ–±—É—é—â–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 0 –∏–∑ 88

### –ü—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞

- **@PSR12:** –ë–∞–∑–æ–≤—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç PSR-12
- **array_syntax:** –ö–æ—Ä–æ—Ç–∫–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –º–∞—Å—Å–∏–≤–æ–≤
- **ordered_imports:** –£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- **no_unused_imports:** –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- **single_quote:** –û–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- **trailing_comma_in_multiline:** Trailing comma –≤ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö

---

## 5. Rector - –ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

### –û–ø–∏—Å–∞–Ω–∏–µ

Rector - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ PHP –∫–æ–¥–∞.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **PHP Sets:** PHP 8.1
- **–í–∫–ª—é—á–µ–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã:**
  - Code Quality
  - Coding Style
  - Dead Code
  - Type Declaration
  - Early Return

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
> rector process --dry-run
87/87 [‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì] 100%

[OK] Rector is done!
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –û–¢–õ–ò–ß–ù–û

**–ò–∑–º–µ–Ω–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è:** 0

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Rector

1. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å PHP:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π PHP 8.1
   - Typed properties
   - Union types
   - Match expressions

2. **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
   - –£–¥–∞–ª–µ–Ω–∏–µ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
   - –£–ø—Ä–æ—â–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π
   - –†–∞–Ω–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã (early returns)

3. **–¢–∏–ø–∏–∑–∞—Ü–∏—è:**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
   - Void return types

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

–û–¥–∏–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ (`RealWorldScenariosTest.php`), —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–ª—è—Ü–∏–∏ –ø–æ –ø–æ—Ä—Ç–∞–º.

---

## 6. –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

### –û–ø–∏—Å–∞–Ω–∏–µ

–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏.

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 438
- **–ü—Ä–æ–π–¥–µ–Ω–æ:** 438
- **–ü—Ä–æ–≤–∞–ª–µ–Ω–æ:** 0
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞:** ~95%

### –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 6.1 Router (–û—Å–Ω–æ–≤–Ω–æ–π —Ä–æ—É—Ç–µ—Ä)

**–¢–µ—Å—Ç—ã:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (GET, POST, PUT, PATCH, DELETE, VIEW, ANY, MATCH)
- –î–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ–∏—Å–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Singleton –ø–∞—Ç—Ç–µ—Ä–Ω
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
$router = new Router();
$route = $router->get('/users', fn() => 'users');
$dispatched = $router->dispatch('/users', 'GET');
```

#### 6.2 Route (–ú–∞—Ä—à—Ä—É—Ç)

**–¢–µ—Å—Ç—ã:**
- –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
- HTTP –º–µ—Ç–æ–¥—ã
- URI –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
- Middleware
- –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- –¢–µ–≥–∏
- Rate Limiting
- IP —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
$route = new Route(['GET'], '/users/{id}', $action);
$route->where('id', '[0-9]+')
      ->name('users.show')
      ->middleware([AuthMiddleware::class])
      ->throttle(60, 1);
```

#### 6.3 RouteCollection

**–¢–µ—Å—Ç—ã:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
- –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥—É
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞

#### 6.4 RouteGroup (–ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤)

**–¢–µ—Å—Ç—ã:**
- –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
- –ü—Ä–µ—Ñ–∏–∫—Å—ã
- –û–±—â–∏–π middleware
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã
- –î–æ–º–µ–Ω—ã –∏ –ø–æ—Ä—Ç—ã

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
$router->group(['prefix' => '/api/v1'], function() {
    $router->get('/users', $action);
    $router->post('/users', $action);
});
```

#### 6.5 Middleware

**–¢–µ—Å—Ç—ã:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è middleware
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ middleware
- –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π middleware
- Middleware –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ

#### 6.6 RateLimiter (–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã)

**–¢–µ—Å—Ç—ã:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- –†–∞–∑–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –≤—Ä–µ–º–µ–Ω–∏ (—Å–µ–∫—É–Ω–¥—ã, –º–∏–Ω—É—Ç—ã, —á–∞—Å—ã, –¥–Ω–∏)

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
$limiter = new RateLimiter(60, 1); // 60 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
$limiter->attempt('192.168.1.1');
if ($limiter->tooManyAttempts('192.168.1.1')) {
    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞
}
```

#### 6.7 BanManager (–°–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)

**–¢–µ—Å—Ç—ã:**
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP
- –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

#### 6.8 UrlGenerator (–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä URL)

**–¢–µ—Å—Ç—ã:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL –ø–æ –∏–º–µ–Ω–∏
- –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –¥–æ–º–µ–Ω–æ–º
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º
- HTTPS –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
$generator = new UrlGenerator($router);
$url = $generator->generate('users.show', ['id' => 5]);
// /users/5
```

#### 6.9 RouteCache (–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–¢–µ—Å—Ç—ã:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫–µ—à–∞
- –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞

#### 6.10 Loaders (–ó–∞–≥—Ä—É–∑—á–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤)

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∏:**

1. **JsonLoader:**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ JSON
   - –í–∞–ª–∏–¥–∞—Ü–∏—è JSON
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. **YamlLoader:**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ YAML
   - –°–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

3. **XmlLoader:**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ XML
   - DTD –≤–∞–ª–∏–¥–∞—Ü–∏—è

4. **PhpLoader:**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ PHP —Ñ–∞–π–ª–æ–≤
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã

5. **AttributeLoader:**
   - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã:**
```php
$loader = new JsonLoader($router);
$loader->load('routes.json');

$loader = new AttributeLoader($router);
$loader->loadFromDirectory('app/Controllers');
```

#### 6.11 Plugins (–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤)

**–¢–µ—Å—Ç—ã:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤
- –•—É–∫–∏ (beforeDispatch, afterDispatch, onException)
- –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã

---

## 7. –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –û–ø–∏—Å–∞–Ω–∏–µ

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ –∞—Ç–∞–∫.

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 13  
**–ü—Ä–æ–π–¥–µ–Ω–æ:** 13 ‚úÖ  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 106ms  
**–ü–∞–º—è—Ç—å:** 12 MB  

### –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### 7.1 Path Traversal Protection ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–±—Ö–æ–¥–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –≤–µ–∫—Ç–æ—Ä—ã:**
```
/../../../etc/passwd
/./././etc/passwd
/uploads/../../../config/database.php
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã

#### 7.2 SQL Injection in Parameters ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –≤–µ–∫—Ç–æ—Ä—ã:**
```
/users/1' OR '1'='1
/users/1; DROP TABLE users--
/users/1 UNION SELECT * FROM passwords
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è

#### 7.3 XSS in Route Parameters ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –≤–µ–∫—Ç–æ—Ä—ã:**
```
/search/<script>alert('XSS')</script>
/profile/<img src=x onerror=alert(1)>
/page/<svg onload=alert(1)>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–ø–∞—Å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è

#### 7.4 IP Whitelist Security ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –†–∞–±–æ—Ç–∞ IP whitelist

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –ú–∞—Ä—à—Ä—É—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è 192.168.1.1
- –ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —Å –¥—Ä—É–≥–∏—Ö IP –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Whitelist —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 7.5 IP Blacklist Security ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –†–∞–±–æ—Ç–∞ IP blacklist

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- IP 10.0.0.1 –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ
- –ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Blacklist —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 7.6 IP Spoofing Protection ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–º–µ–Ω—ã IP

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:**
```
X-Forwarded-For: 127.0.0.1, 192.168.1.1
X-Real-IP: 192.168.1.1
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π IP

#### 7.7 Domain Security ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –¥–æ–º–µ–Ω–∞–º

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –ú–∞—Ä—à—Ä—É—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è example.com
- –ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —Å other.com –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–º–µ–Ω–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

#### 7.8 ReDoS Protection ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç Regular Expression DoS

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
```
(a+)+b
(a*)*b
(a|a)*b
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–ø–∞—Å–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è

#### 7.9 Method Override Attack ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–º–µ–Ω—ã HTTP –º–µ—Ç–æ–¥–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
POST /api/users HTTP/1.1
X-HTTP-Method-Override: DELETE
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–¥–º–µ–Ω–∞ –º–µ—Ç–æ–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —è–≤–Ω–æ)

#### 7.10 Mass Assignment in Route Params ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç mass assignment —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç –¥–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–∏

#### 7.11 Cache Injection ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –∫–µ—à–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –≤–µ–∫—Ç–æ—Ä—ã:**
```php
/../cache/routes.php
\0cache\0routes.php
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–Ω—ä–µ–∫—Ü–∏–∏ –≤ –∫–µ—à –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã

#### 7.12 Resource Exhaustion ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç –∏—Å—Ç–æ—â–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

**–°—Ü–µ–Ω–∞—Ä–∏–∏:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–≥—Ä–æ–º–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø
- –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ URI

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

#### 7.13 Unicode Security Issues ‚úÖ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Unicode

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å–ª—É—á–∞–∏:**
```
/users/◊ê
/pages/‰∏≠Êñá
/search/üîç
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Unicode –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é** –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
2. **–í–∫–ª—é—á–∞–π—Ç–µ Rate Limiting** –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö endpoints
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** –±–∏–±–ª–∏–æ—Ç–µ–∫—É
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ** –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

---

## 8. –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–ø–∏—Å–∞–Ω–∏–µ

–ë–µ–Ω—á–º–∞—Ä–∫-—Ç–µ—Å—Ç—ã –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 5  
**–ü—Ä–æ–π–¥–µ–Ω–æ:** 5 ‚úÖ  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 23.070s  
**–ü–∞–º—è—Ç—å:** 30 MB  

### –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### 8.1 Route Registration Performance ‚úÖ

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:** –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–¢–µ—Å—Ç:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è 1,000 –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Ä–µ–º—è: ~3.4ms –¥–ª—è 1000 –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **~0.0034ms –Ω–∞ –º–∞—Ä—à—Ä—É—Ç**

#### 8.2 Route Matching Performance ‚úÖ

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:** –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–¢–µ—Å—Ç—ã:**
- –ü–µ—Ä–≤—ã–π –º–∞—Ä—à—Ä—É—Ç: 123Œºs
- –°—Ä–µ–¥–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç: 1.7ms
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç: 3.4ms

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- URI –∏–Ω–¥–µ–∫—Å –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- Method –∏–Ω–¥–µ–∫—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏

#### 8.3 Cached Route Performance ‚úÖ

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å –∫–µ—à–µ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –ö–æ–º–ø–∏–ª—è—Ü–∏—è: 8.7ms
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫–µ—à–∞: 10.6ms

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–µ–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ –∑–∞ —Å—á—ë—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤.

#### 8.4 Memory Usage ‚úÖ

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- 100 –º–∞—Ä—à—Ä—É—Ç–æ–≤: ~6 MB
- 1,000 –º–∞—Ä—à—Ä—É—Ç–æ–≤: ~6 MB
- 10,000 –º–∞—Ä—à—Ä—É—Ç–æ–≤: ~14 MB

**–ù–∞ –º–∞—Ä—à—Ä—É—Ç:** ~1.4 KB

#### 8.5 Group Performance ‚úÖ

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã: 2.6ms
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π overhead

---

[–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤ —Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏...]

---

[‚¨Ü –ù–∞–≤–µ—Ä—Ö](#–ø–æ–¥—Ä–æ–±–Ω—ã–µ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è-http-router)

