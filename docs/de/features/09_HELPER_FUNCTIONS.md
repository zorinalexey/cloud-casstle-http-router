# Helper Functions

[English](../../en/features/09_HELPER_FUNCTIONS.md) | [–†—É—Å—Å–∫–∏–π](../../ru/features/09_HELPER_FUNCTIONS.md) | **Deutsch** | [Fran√ßais](../../fr/features/09_HELPER_FUNCTIONS.md) | [‰∏≠Êñá](../../zh/features/09_HELPER_FUNCTIONS.md)

---







---

## üìö Dokumentationsnavigation

[README](../../README.md) | [USER_GUIDE](../USER_GUIDE.md) | [FEATURES_INDEX](../FEATURES_INDEX.md) | [API_REFERENCE](../API_REFERENCE.md) | [ALL_FEATURES](../ALL_FEATURES.md) | [TESTS_SUMMARY](../TESTS_SUMMARY.md) | [PERFORMANCE](../PERFORMANCE_ANALYSIS.md) | [SECURITY](../SECURITY_REPORT.md) | [COMPARISON](../COMPARISON.md) | [FAQ](../FAQ.md)

**Detaillierte Dokumentation:** [01](01_BASIC_ROUTING.md) | [02](02_ROUTE_PARAMETERS.md) | [03](03_ROUTE_GROUPS.md) | [04](04_RATE_LIMITING.md) | [05](05_IP_FILTERING.md) | [06](06_MIDDLEWARE.md) | [07](07_NAMED_ROUTES.md) | [08](08_TAGS.md) | [09](09_HELPER_FUNCTIONS.md) | [10](10_ROUTE_SHORTCUTS.md) | [11](11_ROUTE_MACROS.md) | [12](12_URL_GENERATION.md) | [13](13_EXPRESSION_LANGUAGE.md) | [14](14_CACHING.md) | [15](15_PLUGINS.md) | [16](16_LOADERS.md) | [17](17_PSR_SUPPORT.md) | [18](18_ACTION_RESOLVER.md) | [19](19_STATISTICS.md) | [20](20_SECURITY.md) | [21](21_EXCEPTIONS.md) | [22](22_CLI_TOOLS.md)

---


**Kategorie:** –í mit  nach –º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü und  und   
**Anzahl der —Ñ—É–Ω–∫—Ü und –π:** 18  
**Komplexit√§t:** ‚≠ê Anf√§nger —É—Ä–æ in –µ–Ω—å

---

## –û–ø und  mit –∞–Ω und –µ

Helper Functions - —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ PHP —Ñ—É–Ω–∫—Ü und  und , –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–æ—â–∞—é—Ç —Ä–∞–±–æ—Ç—É  mit  Route und –∑–∞—Ç–æ—Ä–æ–º, –ø—Ä–µ–¥–æ mit —Ç–∞ in –ª—è—è –∫–æ—Ä–æ—Ç–∫ und –π  und  —É–¥–æ–±–Ω—ã–π API –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥ und –º–æ mit —Ç und   und  mit  nach –ª—å–∑–æ in –∞—Ç—å  nach –ª–Ω—ã–µ  und –º–µ auf  –∫–ª–∞ mit  mit –æ in .

## Alle —Ñ—É–Ω–∫—Ü und  und 

### 1. route()

**–° und –≥ auf —Ç—É—Ä–∞:** `route(?string $name = null, array $parameters = []): ?Route`

**–û–ø und  mit –∞–Ω und –µ:** Erhalten Route  nach   und –º–µ–Ω und   oder   in –µ—Ä–Ω—É—Ç—å —Ç–µ–∫—É—â und –π Route.

**Parameter:**
- `$name` - –ò–º—è Route–∞ (null = —Ç–µ–∫—É—â und –π Route)
- `$parameters` - Parameter  f√ºr   nach –¥ mit —Ç–∞–Ω–æ in –∫ und  (–∑–∞—Ä–µ–∑–µ—Ä in  und —Ä–æ in –∞–Ω–æ)

**Beispiele:**

```php
// Erhalten –º–∞—Ä—à—Ä—É—Ç –ø–æ –∏–º–µ–Ω–∏
$route = route('users.show');

// Erhalten —Ç–µ–∫—É—â–∏–π –º–∞—Ä—à—Ä—É—Ç
$current = route();

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
if ($route = route('users.index')) {
    echo "Route exists: " . $route->getUri();
}

// Erhalten –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Ä—à—Ä—É—Ç–µ
$route = route('api.users.show');
if ($route) {
    echo "URI: " . $route->getUri();
    echo "Name: " . $route->getName();
    echo "Methods: " . implode(', ', $route->getMethods());
}
```

**–ò mit  nach –ª—å–∑–æ in –∞–Ω und –µ:**
- –ë—ã mit —Ç—Ä—ã–π –¥–æ mit —Ç—É–ø –∫ Route–∞–º
- –ü—Ä–æ in –µ—Ä–∫–∞  mit —É—â–µ mit —Ç in –æ in –∞–Ω und —è
- Abrufen –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö Route–∞

---

### 2. current_route()

**–° und –≥ auf —Ç—É—Ä–∞:** `current_route(): ?Route`

**–û–ø und  mit –∞–Ω und –µ:** Erhalten —Ç–µ–∫—É—â und –π  in —ã nach –ª–Ω—è—é—â und –π mit —è Route.

**Beispiele:**

```php
// Erhalten —Ç–µ–∫—É—â–∏–π –º–∞—Ä—à—Ä—É—Ç
$current = current_route();

if ($current) {
    echo "Current URI: " . $current->getUri();
    echo "Current name: " . $current->getName();
    
    // Erhalten –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    $params = $current->getParameters();
    print_r($params);
    
    // Erhalten middleware
    $middleware = $current->getMiddleware();
    
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–≥–∏
    if (in_array('api', $current->getTags())) {
        echo "This is API route";
    }
}

// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
class UserController
{
    public function show($id)
    {
        $route = current_route();
        $routeName = $route->getName();
        
        return "Viewing user $id via route: $routeName";
    }
}

// –í middleware
class LoggerMiddleware
{
    public function handle(Route $route, callable $next)
    {
        $current = current_route();
        error_log("Processing: " . $current->getUri());
        
        return $next($route);
    }
}
```

**–ò mit  nach –ª—å–∑–æ in –∞–Ω und –µ:**
- –õ–æ–≥ und —Ä–æ in –∞–Ω und –µ —Ç–µ–∫—É—â–µ–≥–æ Route–∞
- –£ mit –ª–æ in  auf —è –ª–æ–≥ und –∫–∞  auf  –æ mit –Ω–æ in –µ Route–∞
- –û—Ç–ª–∞–¥–∫–∞

---

### 3. previous_route()

**–° und –≥ auf —Ç—É—Ä–∞:** `previous_route(): ?Route`

**–û–ø und  mit –∞–Ω und –µ:** Erhalten vorherige Route (–¥–æ —Ç–µ–∫—É—â–µ–≥–æ).

**Beispiele:**

```php
// Erhalten –ø—Ä–µ–¥—ã–¥—É—â–∏–π –º–∞—Ä—à—Ä—É—Ç
$previous = previous_route();

if ($previous) {
    echo "Previous URI: " . $previous->getUri();
    echo "Previous name: " . $previous->getName();
}

// Redirect back (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ back)
function redirectBack()
{
    $previous = previous_route();
    if ($previous) {
        header('Location: ' . $previous->getUri());
        exit;
    }
}

// Breadcrumbs
$current = current_route();
$previous = previous_route();

echo '<nav>';
if ($previous) {
    echo '<a href="' . $previous->getUri() . '">Back</a> &gt; ';
}
echo '<span>' . $current->getName() . '</span>';
echo '</nav>';

// –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
class Analytics
{
    public function trackNavigation()
    {
        $from = previous_route()?->getUri() ?? 'direct';
        $to = current_route()->getUri();
        
        $this->log("Navigation: $from ‚Üí $to");
    }
}
```

**–ò mit  nach –ª—å–∑–æ in –∞–Ω und –µ:**
- –ö–Ω–æ–ø–∫–∞ "Zur√ºck"
- Breadcrumbs
- –ê auf –ª und —Ç und –∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ in 
- History navigation

---

### 4. route_is()

**–° und –≥ auf —Ç—É—Ä–∞:** `route_is(string $pattern): bool`

**–û–ø und  mit –∞–Ω und –µ:** –ü—Ä–æ in –µ—Ä und —Ç—å,  mit –æAntwort mit —Ç in —É–µ—Ç –ª und  —Ç–µ–∫—É—â und –π Route –ø–∞—Ç—Ç–µ—Ä–Ω—É. –ü–æ–¥–¥–µ—Ä–∂ und  in –∞–µ—Ç wildcards.

**Parameter:**
- `$pattern` - –ü–∞—Ç—Ç–µ—Ä–Ω  und –º–µ–Ω und  Route–∞ ( nach –¥–¥–µ—Ä–∂ und  in –∞–µ—Ç `*`)

**Beispiele:**

```php
// –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
if (route_is('users.show')) {
    echo "Showing user";
}

// Wildcard - –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã users.*
if (route_is('users.*')) {
    echo "Users section";
}

// Wildcard - –≤—Å–µ API –º–∞—Ä—à—Ä—É—Ç—ã
if (route_is('api.*')) {
    echo "API request";
}

// –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏
if (route_is('admin.users.*')) {
    echo "Admin users section";
}

// –í —à–∞–±–ª–æ–Ω–µ
<nav>
    <a href="/users" class="<?= route_is('users.*') ? 'active' : '' ?>">
        Users
    </a>
    <a href="/posts" class="<?= route_is('posts.*') ? 'active' : '' ?>">
        Posts
    </a>
</nav>

// –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
if (route_is('admin.*')) {
    // –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - –ø–æ–∫–∞–∑–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
    echo '<button>Admin Panel</button>';
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ API
if (route_is('api.v1.*')) {
    $apiVersion = 'v1';
} elseif (route_is('api.v2.*')) {
    $apiVersion = 'v2';
}
```

**Wildcards:**
- `*` - –ª—é–±—ã–µ  mit  und –º in –æ–ª—ã
- `users.*` - users.index, users.show, users.edit,  und  —Ç.–¥.
- `api.*.users` - api.v1.users, api.v2.users,  und  —Ç.–¥.

---

### 5. route_name()

**–° und –≥ auf —Ç—É—Ä–∞:** `route_name(): ?string`

**–û–ø und  mit –∞–Ω und –µ:** Erhalten  und –º—è —Ç–µ–∫—É—â–µ–≥–æ Route–∞.

**Beispiele:**

```php
// Erhalten –∏–º—è
$name = route_name();
echo "Current route: $name";  // users.show

// –ü—Ä–æ–≤–µ—Ä–∫–∞
if (route_name() === 'users.show') {
    echo "Viewing user";
}

// –í –ª–æ–≥–∏–∫–µ
switch (route_name()) {
    case 'users.index':
        $title = 'Users List';
        break;
    case 'users.show':
        $title = 'View User';
        break;
    case 'users.edit':
        $title = 'Edit User';
        break;
}

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
error_log("Route: " . route_name());

// –ú–µ—Ç—Ä–∏–∫–∏
$metrics->track('route.' . route_name());
```

---

### 6. router()

**–° und –≥ auf —Ç—É—Ä–∞:** `router(): Router`

**–û–ø und  mit –∞–Ω und –µ:** Erhalten —ç–∫–∑–µ–º–ø–ª—è—Ä —Ä–æ—É—Ç–µ—Ä–∞ (singleton).

**Beispiele:**

```php
// Erhalten —Ä–æ—É—Ç–µ—Ä
$router = router();

// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã
$router->get('/users', $action);
$router->post('/users', $action);

// Erhalten –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã
$allRoutes = $router->getRoutes();

// Erhalten –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
$namedRoutes = $router->getNamedRoutes();

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
$stats = $router->getRouteStats();
print_r($stats);

// –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
$router->enableCache('cache/routes');
$router->compile();

// Middleware
$router->middleware([CorsMiddleware::class]);

// –ì—Ä—É–ø–ø—ã
$router->group(['prefix' => '/admin'], function($r) {
    $r->get('/dashboard', $action);
});
```

---

### 7. dispatch_route()

**–° und –≥ auf —Ç—É—Ä–∞:** `dispatch_route(string $uri, string $method, ...): Route`

**–û–ø und  mit –∞–Ω und –µ:** –î und  mit –ø–µ—Ç—á–µ—Ä und –∑–∞—Ü und —è Route–∞ –±–µ–∑  und  mit  nach –ª—å–∑–æ in –∞–Ω und —è —Ñ–∞ mit –∞–¥–∞.

**Parameter:**
- `$uri` - URI Anfrage–∞
- `$method` - HTTP Methode
- `$domain` - –î–æ–º–µ–Ω (–æ–ø—Ü und –æ auf –ª—å–Ω–æ)
- `$clientIp` - IP –∫–ª und –µ–Ω—Ç–∞ (–æ–ø—Ü und –æ auf –ª—å–Ω–æ)
- `$port` - –ü–æ—Ä—Ç (–æ–ø—Ü und –æ auf –ª—å–Ω–æ)
- `$protocol` - –ü—Ä–æ—Ç–æ–∫–æ–ª (–æ–ø—Ü und –æ auf –ª—å–Ω–æ)

**Beispiele:**

```php
// –ë–∞–∑–æ–≤–∞—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—è
$route = dispatch_route('/users/123', 'GET');

// –° –ø–æ–ª–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
$route = dispatch_route(
    uri: '/api/users/123',
    method: 'GET',
    domain: 'api.example.com',
    clientIp: '192.168.1.1',
    port: 443,
    protocol: 'https'
);

// –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
function handleRequest($uri, $method) {
    try {
        $route = dispatch_route($uri, $method);
        return $route->run();
    } catch (RouteNotFoundException $e) {
        return '404 Not Found';
    }
}

// –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
function testRoute($uri, $method, $expectedResult) {
    $route = dispatch_route($uri, $method);
    $result = $route->run();
    assert($result === $expectedResult);
}

testRoute('/users', 'GET', 'Users list');
```

---

### 8. route_url()

**–° und –≥ auf —Ç—É—Ä–∞:** `route_url(string $name, array $parameters = [], array $queryParams = []): string`

**–û–ø und  mit –∞–Ω und –µ:** –ì–µ–Ω–µ—Ä–∞—Ü und —è URL  nach   und –º–µ–Ω und  Route–∞.

**Parameter:**
- `$name` - –ò–º—è Route–∞
- `$parameters` - Parameter Route–∞
- `$queryParams` - Query Parameter

**Beispiele:**

```php
// –ü—Ä–æ—Å—Ç–æ–π URL
$url = route_url('users.index');
// /users

// –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
$url = route_url('users.show', ['id' => 123]);
// /users/123

// –° query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
$url = route_url('users.index', [], ['page' => 2, 'limit' => 10]);
// /users?page=2&limit=10

// –ö–æ–º–±–∏–Ω–∞—Ü–∏—è
$url = route_url('posts.show', 
    ['slug' => 'hello-world'],
    ['ref' => 'twitter']
);
// /posts/hello-world?ref=twitter

// –í —à–∞–±–ª–æ–Ω–µ
<a href="<?= route_url('users.edit', ['id' => $user->id]) ?>">
    Edit User
</a>

// Redirect
header('Location: ' . route_url('users.show', ['id' => $newUser->id]));

// API
return json_encode([
    'user' => $user,
    'links' => [
        'self' => route_url('api.users.show', ['id' => $user->id]),
        'posts' => route_url('api.users.posts', ['id' => $user->id])
    ]
]);
```

---

### 9. route_has()

**–° und –≥ auf —Ç—É—Ä–∞:** `route_has(string $name): bool`

**–û–ø und  mit –∞–Ω und –µ:** –ü—Ä–æ in –µ—Ä und —Ç—å  mit —É—â–µ mit —Ç in –æ in –∞–Ω und –µ Route–∞  nach   und –º–µ–Ω und .

**Beispiele:**

```php
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
if (route_has('users.show')) {
    echo "Route exists";
}

// –£—Å–ª–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
if (route_has('admin.dashboard')) {
    echo '<a href="' . route_url('admin.dashboard') . '">Admin</a>';
}

// –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫
function safeRouteUrl($name, $params = []) {
    if (!route_has($name)) {
        return '/';
    }
    return route_url($name, $params);
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
$requiredRoutes = ['home', 'login', 'register', 'logout'];
foreach ($requiredRoutes as $route) {
    if (!route_has($route)) {
        throw new Exception("Missing required route: $route");
    }
}

// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é
$menuItems = [
    ['name' => 'users.index', 'label' => 'Users'],
    ['name' => 'posts.index', 'label' => 'Posts'],
    ['name' => 'admin.dashboard', 'label' => 'Admin']
];

foreach ($menuItems as $item) {
    if (route_has($item['name'])) {
        echo "<a href=\"" . route_url($item['name']) . "\">{$item['label']}</a>";
    }
}
```

---

### 10. route_stats()

**–° und –≥ auf —Ç—É—Ä–∞:** `route_stats(): array`

**–û–ø und  mit –∞–Ω und –µ:** Erhalten  mit —Ç–∞—Ç und  mit —Ç und –∫—É Route und –∑–∞—Ç–æ—Ä–∞.

**Beispiele:**

```php
// Erhalten —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
$stats = route_stats();

/*
Array (
    [total] => 150
    [named] => 120
    [with_middleware] => 60
    [with_tags] => 80
    [methods] => Array (
        [GET] => 80
        [POST] => 40
        [PUT] => 15
        [DELETE] => 15
    )
    [domains] => Array (
        [api.example.com] => 30
    )
    [ports] => Array (
        [8080] => 20
    )
)
*/

// –í—ã–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
echo "Total routes: {$stats['total']}\n";
echo "Named routes: {$stats['named']}\n";
echo "GET routes: {$stats['methods']['GET']}\n";

// –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
function showRouteStatistics() {
    $stats = route_stats();
    
    echo "<h2>Route Statistics</h2>";
    echo "<p>Total: {$stats['total']}</p>";
    echo "<p>Named: {$stats['named']}</p>";
    
    echo "<h3>By Method:</h3><ul>";
    foreach ($stats['methods'] as $method => $count) {
        echo "<li>$method: $count</li>";
    }
    echo "</ul>";
}

// –ú–µ—Ç—Ä–∏–∫–∏
$stats = route_stats();
$metrics->gauge('routes.total', $stats['total']);
$metrics->gauge('routes.named', $stats['named']);
```

---

### 11. routes_by_tag()

**–° und –≥ auf —Ç—É—Ä–∞:** `routes_by_tag(string $tag): array`

**–û–ø und  mit –∞–Ω und –µ:** Erhalten alle Routen  mit  —É–∫–∞–∑–∞–Ω–Ω—ã–º —Ç–µ–≥–æ–º.

**Beispiele:**

```php
// Erhalten API –º–∞—Ä—à—Ä—É—Ç—ã
$apiRoutes = routes_by_tag('api');

foreach ($apiRoutes as $route) {
    echo $route->getUri() . "\n";
}

// Erhalten –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
$protectedRoutes = routes_by_tag('protected');

// –ü—Ä–∏–º–µ–Ω–∏—Ç—å middleware –∫–æ –≤—Å–µ–º
foreach ($protectedRoutes as $route) {
    $route->middleware([SecurityMiddleware::class]);
}

// –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
function generateApiDocs() {
    $apiRoutes = routes_by_tag('api');
    
    foreach ($apiRoutes as $route) {
        echo "Endpoint: " . $route->getUri() . "\n";
        echo "Methods: " . implode(', ', $route->getMethods()) . "\n";
        echo "Name: " . $route->getName() . "\n\n";
    }
}

// –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
function testApiRoutes() {
    $apiRoutes = routes_by_tag('api');
    
    foreach ($apiRoutes as $route) {
        // Test each API route
        $uri = $route->getUri();
        $method = $route->getMethods()[0];
        
        testEndpoint($uri, $method);
    }
}
```

---

### 12. route_back()

**–° und –≥ auf —Ç—É—Ä–∞:** `route_back(): ?Route`

**–û–ø und  mit –∞–Ω und –µ:** Erhalten vorherige Route (alias  f√ºr  previous_route).

**Beispiele:**

```php
// –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥
$back = route_back();
if ($back) {
    echo '<a href="' . $back->getUri() . '">Back</a>';
}

// Redirect back
function redirectBack() {
    $backRoute = route_back();
    if ($backRoute) {
        header('Location: ' . $backRoute->getUri());
        exit;
    }
    header('Location: /');
    exit;
}

// –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
Route::post('/users', function() {
    // Save user...
    
    $backRoute = route_back();
    if ($backRoute && str_starts_with($backRoute->getUri(), '/users')) {
        // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        header('Location: ' . $backRoute->getUri());
    } else {
        // –ò–Ω–∞—á–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
        header('Location: /');
    }
});
```

---

### 13-18. –î–æ nach –ª–Ω und —Ç–µ–ª—å–Ω—ã–µ helpers (–∑–∞—Ä–µ–∑–µ—Ä in  und —Ä–æ in –∞–Ω—ã)

```php
// 13. current_route_params() - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
function current_route_params(): array {
    return current_route()?->getParameters() ?? [];
}

// 14. current_route_middleware() - middleware —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
function current_route_middleware(): array {
    return current_route()?->getMiddleware() ?? [];
}

// 15. current_route_tags() - —Ç–µ–≥–∏ —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
function current_route_tags(): array {
    return current_route()?->getTags() ?? [];
}

// 16. route_cache_enabled() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
function route_cache_enabled(): bool {
    return router()->isCacheLoaded();
}

// 17. route_cache_clear() - –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
function route_cache_clear(): bool {
    return router()->clearCache();
}

// 18. route_compile() - –∫–æ–º–ø–∏–ª—è—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
function route_compile(bool $force = false): bool {
    return router()->compile($force);
}
```

---

## –ü—Ä–∞–∫—Ç und —á–µ mit –∫ und –µ –ø—Ä und –º–µ—Ä—ã

### Breadcrumbs

```php
function renderBreadcrumbs() {
    $breadcrumbs = [];
    
    // –ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–∞—Ä—à—Ä—É—Ç
    if ($prev = route_back()) {
        $breadcrumbs[] = [
            'name' => $prev->getName(),
            'url' => $prev->getUri()
        ];
    }
    
    // –¢–µ–∫—É—â–∏–π –º–∞—Ä—à—Ä—É—Ç
    if ($current = current_route()) {
        $breadcrumbs[] = [
            'name' => $current->getName(),
            'url' => null  // Current page
        ];
    }
    
    echo '<nav class="breadcrumbs">';
    foreach ($breadcrumbs as $crumb) {
        if ($crumb['url']) {
            echo "<a href=\"{$crumb['url']}\">{$crumb['name']}</a> &gt; ";
        } else {
            echo "<span>{$crumb['name']}</span>";
        }
    }
    echo '</nav>';
}
```

### –ê–∫—Ç und  in –Ω–æ–µ –º–µ–Ω—é

```php
function menu($items) {
    foreach ($items as $item) {
        $active = route_is($item['route']) ? 'active' : '';
        
        if (route_has($item['route'])) {
            $url = route_url($item['route']);
            echo "<a href=\"$url\" class=\"$active\">{$item['label']}</a>";
        }
    }
}

menu([
    ['route' => 'home', 'label' => 'Home'],
    ['route' => 'users.*', 'label' => 'Users'],
    ['route' => 'posts.*', 'label' => 'Posts'],
]);
```

### API Links (HATEOAS)

```php
function apiResponse($data, $routeName, $params) {
    return [
        'data' => $data,
        'links' => [
            'self' => route_url($routeName, $params),
            'index' => route_url(str_replace('.show', '.index', $routeName))
        ]
    ];
}

// Usage
$user = User::find($id);
return apiResponse($user, 'api.users.show', ['id' => $id]);
```

### –õ–æ–≥ und —Ä–æ in –∞–Ω und –µ

```php
class RouteLogger {
    public function log() {
        $route = current_route();
        $previous = route_back();
        
        error_log(sprintf(
            "Route: %s (from: %s, params: %s)",
            route_name(),
            $previous?->getName() ?? 'direct',
            json_encode(current_route_params())
        ));
    }
}
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü und  und 

### ‚úÖ –•–æ—Ä–æ—à und –µ –ø—Ä–∞–∫—Ç und –∫ und 

1. **–ò mit  nach –ª—å–∑—É–π—Ç–µ route_has() –ø–µ—Ä–µ–¥ route_url()**
   ```php
   // ‚úÖ –•–æ—Ä–æ—à–æ
   if (route_has('users.show')) {
       $url = route_url('users.show', ['id' => 123]);
   }
   ```

2. **–ò mit  nach –ª—å–∑—É–π—Ç–µ route_is()  f√ºr  –∞–∫—Ç und  in –Ω–æ–≥–æ –º–µ–Ω—é**
   ```php
   // ‚úÖ –•–æ—Ä–æ—à–æ
   $active = route_is('users.*') ? 'active' : '';
   ```

3. **–ò mit  nach –ª—å–∑—É–π—Ç–µ router()  f√ºr  –º–∞ mit  mit –æ in —ã—Ö –æ–ø–µ—Ä–∞—Ü und –π**
   ```php
   // ‚úÖ –•–æ—Ä–æ—à–æ
   $router = router();
   $routes = $router->getRoutes();
   ```

### ‚ùå Anti-Patterns

1. **–ù–µ  in —ã–∑—ã in –∞–π—Ç–µ route() –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ  in  —Ü und –∫–ª–µ**
   ```php
   // ‚ùå –ü–ª–æ—Ö–æ
   foreach ($items as $item) {
       $route = route($item->routeName);  // N –∑–∞–ø—Ä–æ—Å–æ–≤
   }
   
   // ‚úÖ –•–æ—Ä–æ—à–æ
   $namedRoutes = router()->getNamedRoutes();
   foreach ($items as $item) {
       $route = $namedRoutes[$item->routeName] ?? null;
   }
   ```

---

## Leistung

| –û–ø–µ—Ä–∞—Ü und —è | –í—Ä–µ–º—è |
|----------|-------|
| route() | ~1Œºs |
| current_route() | ~0.5Œºs |
| route_url() | ~5Œºs |
| route_has() | ~2Œºs |

**–í—ã in –æ–¥:** Alle helpers –æ—á–µ–Ω—å –±—ã mit —Ç—Ä—ã–µ

---

## Siehe auch

- [–ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã](07_NAMED_ROUTES.md)
- [URL Generation](12_URL_GENERATION.md)
- [Route Shortcuts](10_ROUTE_SHORTCUTS.md)

---

**Version:** 1.1.1  
**–î–∞—Ç–∞ –æ–±–Ω–æ in –ª–µ–Ω und —è:** –û–∫—Ç—è–±—Ä—å 2025  
**–°—Ç–∞—Ç—É mit :** ‚úÖ –°—Ç–∞–± und –ª—å auf —è —Ñ—É–Ω–∫—Ü und –æ auf –ª—å–Ω–æ mit —Ç—å


---

## üìö Dokumentationsnavigation

[README](../../README.md) | [USER_GUIDE](../USER_GUIDE.md) | [FEATURES_INDEX](../FEATURES_INDEX.md) | [API_REFERENCE](../API_REFERENCE.md) | [ALL_FEATURES](../ALL_FEATURES.md) | [TESTS_SUMMARY](../TESTS_SUMMARY.md) | [FAQ](../FAQ.md)

**Detaillierte Dokumentation:** [01](01_BASIC_ROUTING.md) | [02](02_ROUTE_PARAMETERS.md) | [03](03_ROUTE_GROUPS.md) | [04](04_RATE_LIMITING.md) | [05](05_IP_FILTERING.md) | [06](06_MIDDLEWARE.md) | [07](07_NAMED_ROUTES.md) | [08](08_TAGS.md) | [09](09_HELPER_FUNCTIONS.md) | [10](10_ROUTE_SHORTCUTS.md) | [11](11_ROUTE_MACROS.md) | [12](12_URL_GENERATION.md) | [13](13_EXPRESSION_LANGUAGE.md) | [14](14_CACHING.md) | [15](15_PLUGINS.md) | [16](16_LOADERS.md) | [17](17_PSR_SUPPORT.md) | [18](18_ACTION_RESOLVER.md) | [19](19_STATISTICS.md) | [20](20_SECURITY.md) | [21](21_EXCEPTIONS.md) | [22](22_CLI_TOOLS.md)

**¬© 2024 CloudCastle HTTP Router**
